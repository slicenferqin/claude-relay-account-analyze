import{_ as le}from"./_plugin-vue_export-helper-BJA4NJ9J.js";/* empty css                   *//* empty css               *//* empty css                  *//* empty css                  */import{l as se,r as x,c,ak as re,e as ue,J as de,m as A,q as g,H as e,B as t,t as a,u as s,F as d,D as ie,A as V,E as T,a8 as ce,T as _e}from"./vue-vendor-W4Nd8ENd.js";import{P as fe,Q as me,R as pe,S as ve,T as be,U as he,V as ge,W as we,X as Ee,Y as xe,Z as Ce,_ as Se,$ as ke,a0 as ye,a1 as C,a2 as De,a3 as Ie,a4 as Re,p as Ae,a5 as Ve,a6 as Te,a7 as Me,a8 as Be,a9 as Ne,aa as Ue,ab as ze,ac as $e,ad as Fe,ae as Le,af as Pe,ag as qe,ah as He,ai as Je}from"./element-plus-Oupk7keL.js";import{u as Ke,a as Oe}from"./index-B15g6QvD.js";import"./utils-7pt7gmow.js";const Qe={class:"dashboard-layout"},We={class:"header-left"},Xe={class:"page-title"},Ye={class:"header-right"},Ze={class:"connection-status"},je={key:0,class:"last-refresh"},Ge={class:"settings-content"},et={class:"dialog-footer"},tt=se({__name:"DashboardLayout",setup(ot){const S=re(),n=Ke(),_=Oe(),M=r=>{const o=new Date(r),l=new Date().getTime()-o.getTime();return l<6e4?"刚刚":l<36e5?`${Math.floor(l/6e4)}分钟前`:l<864e5?`${Math.floor(l/36e5)}小时前`:o.toLocaleDateString("zh-CN")},f=x(!1),w=x(n.refreshInterval),v=x(null),B=c(()=>S.path),k=c(()=>S.meta.title||"看板"),y=c(()=>n.lastRefresh),N=c(()=>_.isConnected?"connected":"disconnected"),U=c(()=>_.isConnected?fe:me),z=c(()=>_.isConnected?"实时连接正常":_.connectionError||"连接已断开"),D=async()=>{await n.refreshAllData()},$=r=>{r?b():m()},F=r=>{n.setRefreshInterval(r),n.isAutoRefresh&&(m(),b())},b=()=>{m(),v.value=window.setInterval(async()=>{n.loading||await D()},n.refreshInterval)},m=()=>{v.value&&(clearInterval(v.value),v.value=null)},L=r=>{switch(r){case"refresh-interval":f.value=!0;break;case"export":console.log("Export data");break;case"about":console.log("About");break}},P=()=>{n.setRefreshInterval(w.value),f.value=!1,n.isAutoRefresh&&(m(),b())};return ue(()=>{_.subscribeToSystemMetrics(),n.isAutoRefresh&&b()}),de(()=>{m()}),(r,o)=>{const i=we,l=ge,q=he,H=be,I=Ie,J=De,K=Re,O=Ve,Q=Te,h=Me,E=$e,W=ze,X=Ne,Y=ye,Z=ce("router-view"),j=Le,G=Fe,R=pe,p=Je,ee=He,te=qe,oe=Pe,ae=ve;return g(),A("div",Qe,[e(R,null,{default:t(()=>[e(H,{width:"250px",class:"sidebar"},{default:t(()=>[o[9]||(o[9]=a("div",{class:"logo"},[a("h2",null,"账号看板"),a("span",{class:"subtitle"},"Account Dashboard")],-1)),e(q,{"default-active":B.value,class:"sidebar-menu",router:"","unique-opened":""},{default:t(()=>[e(l,{index:"/dashboard/overview"},{default:t(()=>[e(i,null,{default:t(()=>[e(s(Ee))]),_:1}),o[4]||(o[4]=a("span",null,"总览",-1))]),_:1}),e(l,{index:"/dashboard/apikeys"},{default:t(()=>[e(i,null,{default:t(()=>[e(s(xe))]),_:1}),o[5]||(o[5]=a("span",null,"API Key管理",-1))]),_:1}),e(l,{index:"/dashboard/accounts"},{default:t(()=>[e(i,null,{default:t(()=>[e(s(Ce))]),_:1}),o[6]||(o[6]=a("span",null,"账号管理",-1))]),_:1}),e(l,{index:"/dashboard/groups"},{default:t(()=>[e(i,null,{default:t(()=>[e(s(Se))]),_:1}),o[7]||(o[7]=a("span",null,"分组管理",-1))]),_:1}),e(l,{index:"/dashboard/analytics"},{default:t(()=>[e(i,null,{default:t(()=>[e(s(ke))]),_:1}),o[8]||(o[8]=a("span",null,"数据分析",-1))]),_:1})]),_:1},8,["default-active"])]),_:1}),e(R,null,{default:t(()=>[e(Y,{class:"header"},{default:t(()=>[a("div",We,[a("h3",Xe,C(k.value),1),e(J,{separator:"/"},{default:t(()=>[e(I,null,{default:t(()=>[...o[10]||(o[10]=[d("看板",-1)])]),_:1}),e(I,null,{default:t(()=>[d(C(k.value),1)]),_:1})]),_:1})]),a("div",Ye,[a("div",Ze,[e(K,{content:z.value,placement:"bottom"},{default:t(()=>[e(i,{class:Ae(["status-icon",N.value]),size:16},{default:t(()=>[(g(),V(T(U.value)))]),_:1},8,["class"])]),_:1},8,["content"])]),y.value?(g(),A("div",je,[e(O,{size:"small",type:"info"},{default:t(()=>[d(" 最后刷新: "+C(M(y.value)),1)]),_:1})])):ie("",!0),e(Q,{modelValue:s(n).isAutoRefresh,"onUpdate:modelValue":o[0]||(o[0]=u=>s(n).isAutoRefresh=u),"inline-prompt":"","active-text":"自动","inactive-text":"手动",onChange:$},null,8,["modelValue"]),e(h,{circle:"",icon:s(Be),loading:s(n).loading,onClick:D,title:"刷新数据"},null,8,["icon","loading"]),e(X,{onCommand:L},{dropdown:t(()=>[e(W,null,{default:t(()=>[e(E,{command:"refresh-interval"},{default:t(()=>[...o[11]||(o[11]=[d("刷新间隔",-1)])]),_:1}),e(E,{command:"export"},{default:t(()=>[...o[12]||(o[12]=[d("导出数据",-1)])]),_:1}),e(E,{command:"about"},{default:t(()=>[...o[13]||(o[13]=[d("关于",-1)])]),_:1})]),_:1})]),default:t(()=>[e(h,{circle:"",icon:s(Ue)},null,8,["icon"])]),_:1})])]),_:1}),e(G,{class:"main-content"},{default:t(()=>[e(j,null,{default:t(()=>[e(Z,null,{default:t(({Component:u,route:ne})=>[e(_e,{name:"fade",mode:"out-in"},{default:t(()=>[(g(),V(T(u),{key:ne.path}))]),_:2},1024)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(ae,{modelValue:f.value,"onUpdate:modelValue":o[3]||(o[3]=u=>f.value=u),title:"设置",width:"500px"},{footer:t(()=>[a("span",et,[e(h,{onClick:o[2]||(o[2]=u=>f.value=!1)},{default:t(()=>[...o[14]||(o[14]=[d("取消",-1)])]),_:1}),e(h,{type:"primary",onClick:P},{default:t(()=>[...o[15]||(o[15]=[d("确定",-1)])]),_:1})])]),default:t(()=>[a("div",Ge,[e(oe,{"label-width":"120px"},{default:t(()=>[e(te,{label:"刷新间隔"},{default:t(()=>[e(ee,{modelValue:w.value,"onUpdate:modelValue":o[1]||(o[1]=u=>w.value=u),placeholder:"选择刷新间隔",onChange:F},{default:t(()=>[e(p,{label:"5秒",value:5e3}),e(p,{label:"10秒",value:1e4}),e(p,{label:"30秒",value:3e4}),e(p,{label:"1分钟",value:6e4}),e(p,{label:"5分钟",value:3e5})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1},8,["modelValue"])])}}}),_t=le(tt,[["__scopeId","data-v-810d338a"]]);export{_t as default};
//# sourceMappingURL=DashboardLayout-BkAs-T3x.js.map
