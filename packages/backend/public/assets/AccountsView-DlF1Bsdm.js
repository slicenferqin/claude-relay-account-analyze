import{_ as ne}from"./_plugin-vue_export-helper-BJA4NJ9J.js";/* empty css                 *//* empty css                   *//* empty css                        *//* empty css                    *//* empty css               *//* empty css                  *//* empty css                  */import{a as F,f as q,b as G}from"./format-B4y3xwuR.js";/* empty css                *//* empty css                   */import{l as ce,r as x,c as ie,e as re,m as _,t as s,K as e,D as t,J as ue,$ as de,u,E as pe,C as f,H as c,I as l,O as _e,F as w,aq as me,ar as fe,q as i,G as ve}from"./vue-vendor-CPEpqY2A.js";import{H as ge,J as he,c as be,X as ye,Y as ke,p as xe,Q as we,R as Ee,n as Ce,r as Ae,U as Te,V as De,C as Ie,D as Re,s as Ve,a0 as Me,a1 as Se,I as Ue,Z as Ne,_ as Pe,a2 as ze,$ as Le,g as Be,a3 as $e,h as Oe,a4 as M,F as Fe}from"./element-plus-7iBGeLeB.js";import{u as qe,a as Ge}from"./index-BkPn-YD4.js";import"./utils-C5IX4h6x.js";const E=b=>(me("data-v-5e0551ac"),b=b(),fe(),b),He={class:"accounts-view"},Je={class:"accounts-grid"},Qe={class:"account-header"},Ke={class:"account-info"},Xe={class:"account-name"},Ye={class:"account-metrics"},Ze={class:"metric"},je=E(()=>s("span",{class:"metric-label"},"今日Token:",-1)),We={class:"metric-value"},et={class:"metric"},tt=E(()=>s("span",{class:"metric-label"},"今日费用:",-1)),at={class:"metric-value expense"},st={class:"metric"},lt=E(()=>s("span",{class:"metric-label"},"近10分钟RPM:",-1)),ot={class:"metric-value"},nt={key:0,class:"group-info"},ct={class:"group-details"},it={class:"group-name"},rt={class:"group-stats"},ut={class:"group-stat"},dt={class:"group-stat"},pt={class:"last-used"},_t={class:"card-header"},mt=E(()=>s("span",null,"账号详细统计",-1)),ft={class:"header-actions"},vt={class:"account-name-cell"},gt={class:"token-usage"},ht={class:"expense"},bt={class:"rpm-cell"},yt={class:"rpm-value"},kt={key:1,class:"no-group"},xt={key:0},wt={key:1},Et={key:0,class:"active-users"},Ct={key:1},At={key:0,class:"account-details"},Tt={key:1},Dt={class:"usage-charts",style:{"margin-top":"20px"}},It=ce({__name:"AccountsView",setup(b){const g=qe(),H=Ge(),y=x(""),k=x(""),C=x(!1),n=x(null),J=ie(()=>{let o=g.accounts;if(y.value){const r=y.value.toLowerCase();o=o.filter(d=>d.accountName.toLowerCase().includes(r)||d.accountId.toLowerCase().includes(r))}return k.value&&(o=o.filter(r=>r.platform===k.value)),o}),S=async()=>{await g.fetchAccounts()},A=o=>{n.value=o,C.value=!0,H.subscribeToAccount(o.accountId)},Q=o=>{switch(o){case"claude-console":case"claude":return M;case"gemini":return M;case"openai":return Fe;default:return M}},U=o=>({"claude-console":"Claude Console",claude:"Claude",gemini:"Gemini",openai:"OpenAI",bedrock:"Bedrock","azure-openai":"Azure OpenAI"})[o]||o,N=o=>({"claude-console":"primary",claude:"success",gemini:"warning",openai:"info"})[o]||"info",T=o=>({active:"活跃",expired:"已过期",error:"错误",created:"已创建"})[o]||o,D=o=>({active:"success",expired:"warning",error:"danger",created:"info"})[o]||"info",K=o=>Math.min(o/100*100,100),X=o=>o<20?"#67c23a":o<60?"#e6a23c":"#f56c6c";return re(()=>{S()}),(o,r)=>{var O;const d=we,P=Be,Y=$e,I=xe,z=he,v=Ue,R=ge,Z=Te,h=Re,j=Ie,L=Ae,p=ke,W=Ee,ee=Ce,te=Le,m=Pe,B=Ne,$=Se,V=ze,ae=Me,se=be,le=ye;return i(),_("div",He,[s("div",Je,[e(R,{gutter:16},{default:t(()=>[(i(!0),_(ue,null,de(u(g).accounts.slice(0,4),a=>(i(),f(v,{span:6,key:a.accountId},{default:t(()=>[e(z,{class:"account-card",onClick:oe=>A(a)},{default:t(()=>[s("div",Qe,[s("div",Ke,[s("h3",Xe,l(a.accountName),1),e(d,{type:D(a.status),size:"small"},{default:t(()=>[c(l(T(a.status)),1)]),_:2},1032,["type"])]),e(P,{class:"account-icon"},{default:t(()=>[(i(),f(ve(Q(a.platform))))]),_:2},1024)]),s("div",Ye,[s("div",Ze,[je,s("span",We,l(u(F)(a.todayTokenUsage)),1)]),s("div",et,[tt,s("span",at,l(u(q)(a.todayExpense)),1)]),s("div",st,[lt,s("span",ot,l(a.recentAvgRpm),1)])]),a.group?(i(),_("div",nt,[e(Y),s("div",ct,[s("div",it,[e(P,null,{default:t(()=>[e(u(Oe))]),_:1}),s("span",null,l(a.group.name),1)]),s("div",rt,[s("span",ut," 总用户: "+l(a.group.totalMembers),1),s("span",dt," 活跃: "+l(a.group.activeMembers),1)])])])):w("",!0),s("div",pt,[e(I,{type:"info",size:"small"},{default:t(()=>[c(" 最后使用: "+l(u(G)(a.lastUsedAt)),1)]),_:2},1024)])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),e(z,null,{header:t(()=>[s("div",_t,[mt,s("div",ft,[e(Z,{modelValue:y.value,"onUpdate:modelValue":r[0]||(r[0]=a=>y.value=a),placeholder:"搜索账号","prefix-icon":u(De),clearable:"",style:{width:"200px","margin-right":"8px"}},null,8,["modelValue","prefix-icon"]),e(j,{modelValue:k.value,"onUpdate:modelValue":r[1]||(r[1]=a=>k.value=a),placeholder:"选择平台",clearable:"",style:{width:"150px","margin-right":"8px"}},{default:t(()=>[e(h,{label:"全部平台",value:""}),e(h,{label:"Claude Console",value:"claude-console"}),e(h,{label:"Claude",value:"claude"}),e(h,{label:"Gemini",value:"gemini"}),e(h,{label:"OpenAI",value:"openai"})]),_:1},8,["modelValue"]),e(L,{type:"primary",icon:u(Ve),loading:u(g).loading,onClick:S},{default:t(()=>[c(" 刷新 ")]),_:1},8,["icon","loading"])])])]),default:t(()=>[pe((i(),f(te,{data:u(J),stripe:"",style:{width:"100%"},flexible:!0,onRowClick:A},{default:t(()=>[e(p,{prop:"accountName",label:"账号名称","min-width":"150"},{default:t(({row:a})=>[s("div",vt,[e(I,{strong:""},{default:t(()=>[c(l(a.accountName),1)]),_:2},1024),e(d,{type:N(a.platform),size:"small"},{default:t(()=>[c(l(U(a.platform)),1)]),_:2},1032,["type"])])]),_:1}),e(p,{prop:"todayTokenUsage",label:"今日Token使用量","min-width":"140",sortable:""},{default:t(({row:a})=>[s("span",gt,l(u(F)(a.todayTokenUsage)),1)]),_:1}),e(p,{prop:"todayExpense",label:"今日费用消耗","min-width":"130",sortable:""},{default:t(({row:a})=>[s("span",ht,l(u(q)(a.todayExpense)),1)]),_:1}),e(p,{prop:"recentAvgRpm",label:"近10分钟RPM","min-width":"120",sortable:""},{default:t(({row:a})=>[s("div",bt,[e(W,{percentage:K(a.recentAvgRpm),"stroke-width":6,"show-text":!1,color:X(a.recentAvgRpm)},null,8,["percentage","color"]),s("span",yt,l(a.recentAvgRpm),1)])]),_:1}),e(p,{prop:"group",label:"账号所属分组","min-width":"130"},{default:t(({row:a})=>[a.group?(i(),f(d,{key:0,type:"primary",size:"small"},{default:t(()=>[c(l(a.group.name),1)]),_:2},1024)):(i(),_("span",kt,"无分组"))]),_:1}),e(p,{prop:"group.totalMembers",label:"分组用户数",width:"110"},{default:t(({row:a})=>[a.group?(i(),_("span",xt,l(a.group.totalMembers),1)):(i(),_("span",wt,"-"))]),_:1}),e(p,{prop:"group.activeMembers",label:"分组活跃用户","min-width":"130"},{default:t(({row:a})=>[a.group?(i(),_("span",Et,l(a.group.activeMembers)+"/"+l(a.group.totalMembers),1)):(i(),_("span",Ct,"-"))]),_:1}),e(p,{prop:"status",label:"状态",width:"90",align:"center"},{default:t(({row:a})=>[e(d,{type:D(a.status),size:"small"},{default:t(()=>[c(l(T(a.status)),1)]),_:2},1032,["type"])]),_:1}),e(p,{prop:"lastUsedAt",label:"最后使用时间","min-width":"150"},{default:t(({row:a})=>[e(ee,{content:new Date(a.lastUsedAt).toLocaleString()},{default:t(()=>[s("span",null,l(u(G)(a.lastUsedAt)),1)]),_:2},1032,["content"])]),_:1}),e(p,{label:"操作","min-width":"120",fixed:"right"},{default:t(({row:a})=>[e(L,{size:"small",onClick:_e(oe=>A(a),["stop"])},{default:t(()=>[c(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[le,u(g).loading]])]),_:1}),e(se,{modelValue:C.value,"onUpdate:modelValue":r[2]||(r[2]=a=>C.value=a),title:`账号详情: ${(O=n.value)==null?void 0:O.accountName}`,width:"1000px"},{default:t(()=>[n.value?(i(),_("div",At,[e(ae,null,{default:t(()=>[e($,{label:"基本信息",name:"basic"},{default:t(()=>[e(R,{gutter:16},{default:t(()=>[e(v,{span:12},{default:t(()=>[e(B,{title:"账号信息",column:1,border:""},{default:t(()=>[e(m,{label:"账号名称"},{default:t(()=>[c(l(n.value.accountName),1)]),_:1}),e(m,{label:"平台"},{default:t(()=>[e(d,{type:N(n.value.platform)},{default:t(()=>[c(l(U(n.value.platform)),1)]),_:1},8,["type"])]),_:1}),e(m,{label:"状态"},{default:t(()=>[e(d,{type:D(n.value.status)},{default:t(()=>[c(l(T(n.value.status)),1)]),_:1},8,["type"])]),_:1}),e(m,{label:"是否活跃"},{default:t(()=>[e(d,{type:n.value.isActive?"success":"danger"},{default:t(()=>[c(l(n.value.isActive?"是":"否"),1)]),_:1},8,["type"])]),_:1}),e(m,{label:"最后使用时间"},{default:t(()=>[c(l(new Date(n.value.lastUsedAt).toLocaleString()),1)]),_:1})]),_:1})]),_:1}),e(v,{span:12},{default:t(()=>[e(B,{title:"分组信息",column:1,border:""},{default:t(()=>[e(m,{label:"所属分组"},{default:t(()=>[n.value.group?(i(),f(d,{key:0,type:"primary"},{default:t(()=>[c(l(n.value.group.name),1)]),_:1})):(i(),_("span",Tt,"无分组"))]),_:1}),n.value.group?(i(),f(m,{key:0,label:"分组总用户数"},{default:t(()=>[c(l(n.value.group.totalMembers),1)]),_:1})):w("",!0),n.value.group?(i(),f(m,{key:1,label:"分组活跃用户数"},{default:t(()=>[c(l(n.value.group.activeMembers),1)]),_:1})):w("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e($,{label:"使用统计",name:"usage"},{default:t(()=>[e(R,{gutter:16},{default:t(()=>[e(v,{span:8},{default:t(()=>[e(V,{title:"今日Token使用量",value:n.value.todayTokenUsage},null,8,["value"])]),_:1}),e(v,{span:8},{default:t(()=>[e(V,{title:"今日费用消耗",value:n.value.todayExpense,precision:"2",prefix:"$"},null,8,["value"])]),_:1}),e(v,{span:8},{default:t(()=>[e(V,{title:"近10分钟平均RPM",value:n.value.recentAvgRpm},null,8,["value"])]),_:1})]),_:1}),s("div",Dt,[e(I,{type:"info"},{default:t(()=>[c("使用趋势图表功能开发中...")]),_:1})])]),_:1})]),_:1})])):w("",!0)]),_:1},8,["modelValue","title"])])}}}),Ht=ne(It,[["__scopeId","data-v-5e0551ac"]]);export{Ht as default};
