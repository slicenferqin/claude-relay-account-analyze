import{_ as oe}from"./_plugin-vue_export-helper-vHbaxTkL.js";/* empty css                   *//* empty css                   *//* empty css                        *//* empty css               *//* empty css                    *//* empty css                  *//* empty css                  */import{a as F,f as O,b as $}from"./format-BAX8h6T0.js";/* empty css                *//* empty css                   *//* empty css                */import{q as le,c as ne,o as ce,b as p,d as s,D as e,v as t,F as ie,P as de,x as re,t as v,B as d,H as ue,z as w,a5 as _e,a6 as pe,f as c,A as me}from"./vue-vendor-BkJYhFEr.js";import{_ as A,az as fe,aB as ve,a6 as he,u as r,aP as ge,aQ as be,ah as o,aI as ye,aJ as ke,ak as xe,am as we,aM as Ae,aN as Ce,av as Ee,aw as Te,an as Me,aU as Re,aV as Ve,aA as De,aR as Ie,aS as Se,aT as Ne,aa as Ue,aW as Pe,ae as ze,aX as V,ax as Be}from"./element-plus-BlTo_VXI.js";import{u as Le,a as Fe}from"./index-CL1UbGLD.js";import"./utils-2ne8F3OK.js";const f=y=>(_e("data-v-5a86fe94"),y=y(),pe(),y),Oe={class:"accounts-view"},$e={class:"accounts-grid"},qe={class:"account-header"},Ge={class:"account-info"},Qe={class:"account-name"},He={class:"account-metrics"},Je={class:"metric"},We=f(()=>s("span",{class:"metric-label"},"今日Token:",-1)),Xe={class:"metric-value"},je={class:"metric"},Ke=f(()=>s("span",{class:"metric-label"},"今日费用:",-1)),Ye={class:"metric-value expense"},Ze={class:"metric"},et=f(()=>s("span",{class:"metric-label"},"近10分钟RPM:",-1)),tt={class:"metric-value"},at={key:0,class:"group-info"},st={class:"group-details"},ot={class:"group-name"},lt={class:"group-stats"},nt={class:"group-stat"},ct={class:"group-stat"},it={class:"last-used"},dt={class:"el-text",type:"info",size:"small"},rt={class:"card-header"},ut=f(()=>s("span",null,"账号详细统计",-1)),_t={class:"header-actions"},pt=d(" 刷新 "),mt={class:"account-name-cell"},ft={class:"el-text",strong:""},vt={class:"token-usage"},ht={class:"expense"},gt={class:"rpm-cell"},bt={class:"rpm-value"},yt={key:1,class:"no-group"},kt={key:0},xt={key:1},wt={key:0,class:"active-users"},At={key:1},Ct=d(" 详情 "),Et={key:0,class:"account-details"},Tt={key:1},Mt={class:"stat-item"},Rt=f(()=>s("div",{class:"stat-title"},"今日Token使用量",-1)),Vt={class:"stat-value"},Dt={class:"stat-item"},It=f(()=>s("div",{class:"stat-title"},"今日费用消耗",-1)),St={class:"stat-value"},Nt={class:"stat-item"},Ut=f(()=>s("div",{class:"stat-title"},"近10分钟平均RPM",-1)),Pt={class:"stat-value"},zt=f(()=>s("div",{class:"usage-charts",style:{"margin-top":"20px"}},[s("span",{class:"el-text",type:"info"},"使用趋势图表功能开发中...")],-1)),Bt=le({__name:"AccountsView",setup(y){const g=Le(),q=Fe(),k=A(""),x=A(""),C=A(!1),n=A(null),G=ne(()=>{let l=g.accounts;if(k.value){const i=k.value.toLowerCase();l=l.filter(u=>u.accountName.toLowerCase().includes(i)||u.accountId.toLowerCase().includes(i))}return x.value&&(l=l.filter(i=>i.platform===x.value)),l}),D=async()=>{await g.fetchAccounts()},E=l=>{n.value=l,C.value=!0,q.subscribeToAccount(l.accountId)},Q=l=>{switch(l){case"claude-console":case"claude":return V;case"gemini":return V;case"openai":return Be;default:return V}},I=l=>({"claude-console":"Claude Console",claude:"Claude",gemini:"Gemini",openai:"OpenAI",bedrock:"Bedrock","azure-openai":"Azure OpenAI"})[l]||l,S=l=>({"claude-console":"primary",claude:"success",gemini:"warning",openai:"info"})[l]||"info",T=l=>({active:"活跃",expired:"已过期",error:"错误",created:"已创建"})[l]||l,M=l=>({active:"success",expired:"warning",error:"danger",created:"info"})[l]||"info",H=l=>Math.min(l/100*100,100),J=l=>l<20?"#67c23a":l<60?"#e6a23c":"#f56c6c";return ce(()=>{D()}),(l,i)=>{var L;const u=ye,N=Ue,W=Pe,U=ve,h=De,R=fe,X=Ae,b=Te,j=Ee,P=we,_=be,K=ke,Y=xe,Z=Ne,m=Se,z=Ie,B=Ve,ee=Re,te=he,ae=ge;return c(),p("div",Oe,[s("div",$e,[e(R,{gutter:16},{default:t(()=>[(c(!0),p(ie,null,de(r(g).accounts.slice(0,4),a=>(c(),v(h,{span:6,key:a.accountId},{default:t(()=>[e(U,{class:"account-card",onClick:se=>E(a)},{default:t(()=>[s("div",qe,[s("div",Ge,[s("h3",Qe,o(a.accountName),1),e(u,{type:M(a.status),size:"small"},{default:t(()=>[d(o(T(a.status)),1)]),_:2},1032,["type"])]),e(N,{class:"account-icon"},{default:t(()=>[(c(),v(me(Q(a.platform))))]),_:2},1024)]),s("div",He,[s("div",Je,[We,s("span",Xe,o(r(F)(a.todayTokenUsage)),1)]),s("div",je,[Ke,s("span",Ye,o(r(O)(a.todayExpense)),1)]),s("div",Ze,[et,s("span",tt,o(a.recentAvgRpm),1)])]),a.group?(c(),p("div",at,[e(W),s("div",st,[s("div",ot,[e(N,null,{default:t(()=>[e(r(ze))]),_:1}),s("span",null,o(a.group.name),1)]),s("div",lt,[s("span",nt," 总用户: "+o(a.group.totalMembers),1),s("span",ct," 活跃: "+o(a.group.activeMembers),1)])])])):w("",!0),s("div",it,[s("span",dt," 最后使用: "+o(r($)(a.lastUsedAt)),1)])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),e(U,null,{header:t(()=>[s("div",rt,[ut,s("div",_t,[e(X,{modelValue:k.value,"onUpdate:modelValue":i[0]||(i[0]=a=>k.value=a),placeholder:"搜索账号","prefix-icon":r(Ce),clearable:"",style:{width:"200px","margin-right":"8px"}},null,8,["modelValue","prefix-icon"]),e(j,{modelValue:x.value,"onUpdate:modelValue":i[1]||(i[1]=a=>x.value=a),placeholder:"选择平台",clearable:"",style:{width:"150px","margin-right":"8px"}},{default:t(()=>[e(b,{label:"全部平台",value:""}),e(b,{label:"Claude Console",value:"claude-console"}),e(b,{label:"Claude",value:"claude"}),e(b,{label:"Gemini",value:"gemini"}),e(b,{label:"OpenAI",value:"openai"})]),_:1},8,["modelValue"]),e(P,{type:"primary",icon:r(Me),loading:r(g).loading,onClick:D},{default:t(()=>[pt]),_:1},8,["icon","loading"])])])]),default:t(()=>[re((c(),v(Z,{data:r(G),stripe:"",style:{width:"100%"},flexible:!0,onRowClick:E},{default:t(()=>[e(_,{prop:"accountName",label:"账号名称","min-width":"150"},{default:t(({row:a})=>[s("div",mt,[s("span",ft,o(a.accountName),1),e(u,{type:S(a.platform),size:"small"},{default:t(()=>[d(o(I(a.platform)),1)]),_:2},1032,["type"])])]),_:1}),e(_,{prop:"todayTokenUsage",label:"今日Token使用量","min-width":"140",sortable:""},{default:t(({row:a})=>[s("span",vt,o(r(F)(a.todayTokenUsage)),1)]),_:1}),e(_,{prop:"todayExpense",label:"今日费用消耗","min-width":"130",sortable:""},{default:t(({row:a})=>[s("span",ht,o(r(O)(a.todayExpense)),1)]),_:1}),e(_,{prop:"recentAvgRpm",label:"近10分钟RPM","min-width":"120",sortable:""},{default:t(({row:a})=>[s("div",gt,[e(K,{percentage:H(a.recentAvgRpm),"stroke-width":6,"show-text":!1,color:J(a.recentAvgRpm)},null,8,["percentage","color"]),s("span",bt,o(a.recentAvgRpm),1)])]),_:1}),e(_,{prop:"group",label:"账号所属分组","min-width":"130"},{default:t(({row:a})=>[a.group?(c(),v(u,{key:0,type:"primary",size:"small"},{default:t(()=>[d(o(a.group.name),1)]),_:2},1024)):(c(),p("span",yt,"无分组"))]),_:1}),e(_,{prop:"group.totalMembers",label:"分组用户数",width:"110"},{default:t(({row:a})=>[a.group?(c(),p("span",kt,o(a.group.totalMembers),1)):(c(),p("span",xt,"-"))]),_:1}),e(_,{prop:"group.activeMembers",label:"分组活跃用户","min-width":"130"},{default:t(({row:a})=>[a.group?(c(),p("span",wt,o(a.group.activeMembers)+"/"+o(a.group.totalMembers),1)):(c(),p("span",At,"-"))]),_:1}),e(_,{prop:"status",label:"状态",width:"90",align:"center"},{default:t(({row:a})=>[e(u,{type:M(a.status),size:"small"},{default:t(()=>[d(o(T(a.status)),1)]),_:2},1032,["type"])]),_:1}),e(_,{prop:"lastUsedAt",label:"最后使用时间","min-width":"150"},{default:t(({row:a})=>[e(Y,{content:new Date(a.lastUsedAt).toLocaleString()},{default:t(()=>[s("span",null,o(r($)(a.lastUsedAt)),1)]),_:2},1032,["content"])]),_:1}),e(_,{label:"操作","min-width":"120",fixed:"right"},{default:t(({row:a})=>[e(P,{size:"small",onClick:ue(se=>E(a),["stop"])},{default:t(()=>[Ct]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[ae,r(g).loading]])]),_:1}),e(te,{modelValue:C.value,"onUpdate:modelValue":i[2]||(i[2]=a=>C.value=a),title:`账号详情: ${(L=n.value)==null?void 0:L.accountName}`,width:"1000px"},{default:t(()=>[n.value?(c(),p("div",Et,[e(ee,null,{default:t(()=>[e(B,{label:"基本信息",name:"basic"},{default:t(()=>[e(R,{gutter:16},{default:t(()=>[e(h,{span:12},{default:t(()=>[e(z,{title:"账号信息",column:1,border:""},{default:t(()=>[e(m,{label:"账号名称"},{default:t(()=>[d(o(n.value.accountName),1)]),_:1}),e(m,{label:"平台"},{default:t(()=>[e(u,{type:S(n.value.platform)},{default:t(()=>[d(o(I(n.value.platform)),1)]),_:1},8,["type"])]),_:1}),e(m,{label:"状态"},{default:t(()=>[e(u,{type:M(n.value.status)},{default:t(()=>[d(o(T(n.value.status)),1)]),_:1},8,["type"])]),_:1}),e(m,{label:"是否活跃"},{default:t(()=>[e(u,{type:n.value.isActive?"success":"danger"},{default:t(()=>[d(o(n.value.isActive?"是":"否"),1)]),_:1},8,["type"])]),_:1}),e(m,{label:"最后使用时间"},{default:t(()=>[d(o(new Date(n.value.lastUsedAt).toLocaleString()),1)]),_:1})]),_:1})]),_:1}),e(h,{span:12},{default:t(()=>[e(z,{title:"分组信息",column:1,border:""},{default:t(()=>[e(m,{label:"所属分组"},{default:t(()=>[n.value.group?(c(),v(u,{key:0,type:"primary"},{default:t(()=>[d(o(n.value.group.name),1)]),_:1})):(c(),p("span",Tt,"无分组"))]),_:1}),n.value.group?(c(),v(m,{key:0,label:"分组总用户数"},{default:t(()=>[d(o(n.value.group.totalMembers),1)]),_:1})):w("",!0),n.value.group?(c(),v(m,{key:1,label:"分组活跃用户数"},{default:t(()=>[d(o(n.value.group.activeMembers),1)]),_:1})):w("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e(B,{label:"使用统计",name:"usage"},{default:t(()=>[e(R,{gutter:16},{default:t(()=>[e(h,{span:8},{default:t(()=>[s("div",Mt,[Rt,s("div",Vt,o(n.value.todayTokenUsage||0),1)])]),_:1}),e(h,{span:8},{default:t(()=>[s("div",Dt,[It,s("div",St,"$"+o((n.value.todayExpense||0).toFixed(2)),1)])]),_:1}),e(h,{span:8},{default:t(()=>[s("div",Nt,[Ut,s("div",Pt,o(n.value.recentAvgRpm||0),1)])]),_:1})]),_:1}),zt]),_:1})]),_:1})])):w("",!0)]),_:1},8,["modelValue","title"])])}}}),ta=oe(Bt,[["__scopeId","data-v-5a86fe94"]]);export{ta as default};
