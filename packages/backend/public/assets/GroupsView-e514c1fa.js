import{$ as w,u as d,ae as $,ad as o}from"./element-plus-7892819a.js";import{u as E}from"./index-4886d59f.js";import{b as I,f as F}from"./format-96392f60.js";import{q as L,o as T,d as p,D as e,v as t,K as l,b as _,e as a,F as q,N as R,A as k,B as n,t as j,a5 as H,a6 as J}from"./vue-vendor-b6cd13bd.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";import"./utils-e3271d43.js";const u=m=>(H("data-v-796606a1"),m=m(),J(),m),Q={class:"groups-view"},W={class:"card-header"},X=u(()=>a("span",null,"分组管理",-1)),Y=n(" 刷新 "),Z={class:"groups-grid"},ee={class:"group-header"},te={class:"group-name"},se={class:"group-stats"},ae={class:"stat"},oe=u(()=>a("span",{class:"stat-label"},"成员数量:",-1)),le={class:"stat-value"},ne={class:"stat"},ce=u(()=>a("span",{class:"stat-label"},"创建时间:",-1)),re={class:"stat-value"},de={key:0,class:"group-description"},_e={class:"el-text",type:"info",size:"small"},ie={key:0,class:"empty-state"},pe={key:0,class:"group-details"},ue=u(()=>a("h4",null,"成员账户",-1)),me=u(()=>a("h4",null,"关联API Keys",-1)),fe=L({setup(m){const f=E(),b=w(!1),c=w(null),v=w(null),C=async()=>{await f.fetchGroups()},N=async y=>{c.value=y,b.value=!0;try{v.value=await f.getGroupMembers(y.id)}catch(h){console.error("Error loading group members:",h)}};return T(()=>{C()}),(y,h)=>{var G;const B=l("el-button"),g=l("el-tag"),x=l("el-card"),z=l("el-col"),K=l("el-row"),M=l("el-empty"),i=l("el-descriptions-item"),P=l("el-descriptions"),V=l("el-divider"),r=l("el-table-column"),D=l("el-table"),U=l("el-dialog");return _(),p("div",Q,[e(x,null,{header:t(()=>[a("div",W,[X,e(B,{type:"primary",icon:d($),onClick:C},{default:t(()=>[Y]),_:1},8,["icon"])])]),default:t(()=>[a("div",Z,[e(K,{gutter:16},{default:t(()=>[(_(!0),p(q,null,R(d(f).groups,s=>(_(),j(z,{span:8,key:s.id,style:{"margin-bottom":"16px"}},{default:t(()=>[e(x,{class:"group-card",onClick:A=>N(s)},{default:t(()=>[a("div",ee,[a("h3",te,o(s.name),1),e(g,{type:"primary",size:"small"},{default:t(()=>[n(o(s.platform),1)]),_:2},1024)]),a("div",se,[a("div",ae,[oe,a("span",le,o(s.memberCount),1)]),a("div",ne,[ce,a("span",re,o(d(I)(s.createdAt)),1)])]),s.description?(_(),p("div",de,[a("span",_e,o(s.description),1)])):k("",!0)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),d(f).groups.length===0?(_(),p("div",ie,[e(M,{description:"暂无分组数据"})])):k("",!0)]),_:1}),e(U,{modelValue:b.value,"onUpdate:modelValue":h[0]||(h[0]=s=>b.value=s),title:`分组详情: ${(G=c.value)==null?void 0:G.name}`,width:"800px"},{default:t(()=>[c.value&&v.value?(_(),p("div",pe,[e(P,{title:"分组信息",column:2,border:""},{default:t(()=>[e(i,{label:"分组名称"},{default:t(()=>[n(o(c.value.name),1)]),_:1}),e(i,{label:"平台"},{default:t(()=>[n(o(c.value.platform),1)]),_:1}),e(i,{label:"成员数量"},{default:t(()=>[n(o(c.value.memberCount),1)]),_:1}),e(i,{label:"创建时间"},{default:t(()=>[n(o(new Date(c.value.createdAt).toLocaleString()),1)]),_:1}),e(i,{label:"描述",span:2},{default:t(()=>[n(o(c.value.description||"无描述"),1)]),_:1})]),_:1}),e(V),ue,e(D,{data:v.value.accounts,stripe:""},{default:t(()=>[e(r,{prop:"accountName",label:"账户名称"}),e(r,{prop:"platform",label:"平台"}),e(r,{prop:"isActive",label:"状态"},{default:t(({row:s})=>[e(g,{type:s.isActive?"success":"danger",size:"small"},{default:t(()=>[n(o(s.isActive?"活跃":"非活跃"),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"lastUsedAt",label:"最后使用时间"},{default:t(({row:s})=>[n(o(d(I)(s.lastUsedAt)),1)]),_:1})]),_:1},8,["data"]),e(V),me,e(D,{data:v.value.apiKeys,stripe:""},{default:t(()=>[e(r,{prop:"name",label:"API Key名称"}),e(r,{prop:"isActive",label:"状态"},{default:t(({row:s})=>[e(g,{type:s.isActive?"success":"danger",size:"small"},{default:t(()=>[n(o(s.isActive?"活跃":"非活跃"),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"rpm",label:"RPM"}),e(r,{prop:"usage.today.cost",label:"今日费用"},{default:t(({row:s})=>{var A,S;return[n(o(d(F)(((S=(A=s.usage)==null?void 0:A.today)==null?void 0:S.cost)||0)),1)]}),_:1})]),_:1},8,["data"])])):k("",!0)]),_:1},8,["modelValue","title"])])}}});const we=O(fe,[["__scopeId","data-v-796606a1"]]);export{we as default};
