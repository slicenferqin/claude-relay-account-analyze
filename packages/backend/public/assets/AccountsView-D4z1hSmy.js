import{_ as le}from"./_plugin-vue_export-helper-BJA4NJ9J.js";/* empty css                 *//* empty css                   *//* empty css                        *//* empty css                    *//* empty css               *//* empty css                  *//* empty css                  */import{a as F,f as G,b as O}from"./format-B4y3xwuR.js";/* empty css                *//* empty css                   */import{l as oe,r as k,c as ne,e as ie,m as _,q as c,t as s,H as e,B as t,G as ce,Y as re,u,C as ue,A as f,F as r,L as de,D as x,E as pe}from"./vue-vendor-C0qDyb5Q.js";import{ai as _e,ak as me,S as fe,ay as ve,az as ge,a5 as be,a1 as o,ar as ye,as as he,a4 as ke,a7 as xe,av as Ee,aw as we,ag as Ae,ah as Ce,a8 as Te,aD as De,aE as Me,aj as Re,aA as Ve,aB as Se,aF as Ne,aC as Ue,W as Ie,aG as Pe,_ as ze,aH as R,P as Be}from"./element-plus-A89xnwnm.js";import{u as Le,a as Fe}from"./index-BnHm-nza.js";import"./utils-AU2jKXl8.js";const Ge={class:"accounts-view"},Oe={class:"accounts-grid"},$e={class:"account-header"},qe={class:"account-info"},He={class:"account-name"},je={class:"account-metrics"},Qe={class:"metric"},We={class:"metric-value"},Ye={class:"metric"},Je={class:"metric-value expense"},Ke={class:"metric"},Xe={class:"metric-value"},Ze={key:0,class:"group-info"},et={class:"group-details"},tt={class:"group-name"},at={class:"group-stats"},st={class:"group-stat"},lt={class:"group-stat"},ot={class:"last-used"},nt={class:"card-header"},it={class:"header-actions"},ct={class:"account-name-cell"},rt={class:"token-usage"},ut={class:"expense"},dt={class:"rpm-cell"},pt={class:"rpm-value"},_t={key:1,class:"no-group"},mt={key:0},ft={key:1},vt={key:0,class:"active-users"},gt={key:1},bt={key:0,class:"account-details"},yt={key:1},ht={class:"usage-charts",style:{"margin-top":"20px"}},kt=oe({__name:"AccountsView",setup(xt){const g=Le(),$=Fe(),y=k(""),h=k(""),E=k(!1),i=k(null),q=ne(()=>{let n=g.accounts;if(y.value){const l=y.value.toLowerCase();n=n.filter(d=>d.accountName.toLowerCase().includes(l)||d.accountId.toLowerCase().includes(l))}return h.value&&(n=n.filter(l=>l.platform===h.value)),n}),V=async()=>{await g.fetchAccounts()},w=n=>{i.value=n,E.value=!0,$.subscribeToAccount(n.accountId)},H=n=>{switch(n){case"claude-console":case"claude":return R;case"gemini":return R;case"openai":return Be;default:return R}},S=n=>({"claude-console":"Claude Console",claude:"Claude",gemini:"Gemini",openai:"OpenAI",bedrock:"Bedrock","azure-openai":"Azure OpenAI"})[n]||n,N=n=>({"claude-console":"primary",claude:"success",gemini:"warning",openai:"info"})[n]||"info",A=n=>({active:"活跃",expired:"已过期",error:"错误",created:"已创建"})[n]||n,C=n=>({active:"success",expired:"warning",error:"danger",created:"info"})[n]||"info",j=n=>Math.min(n/100*100,100),Q=n=>n<20?"#67c23a":n<60?"#e6a23c":"#f56c6c";return ie(()=>{V()}),(n,l)=>{var L;const d=ye,U=Ie,W=Pe,T=be,I=me,v=Re,D=_e,Y=Ee,b=Ce,J=Ae,P=xe,p=ge,K=he,X=ke,Z=Ue,m=Se,z=Ve,B=Me,M=Ne,ee=De,te=fe,ae=ve;return c(),_("div",Ge,[s("div",Oe,[e(D,{gutter:16},{default:t(()=>[(c(!0),_(ce,null,re(u(g).accounts.slice(0,4),a=>(c(),f(v,{span:6,key:a.accountId},{default:t(()=>[e(I,{class:"account-card",onClick:se=>w(a)},{default:t(()=>[s("div",$e,[s("div",qe,[s("h3",He,o(a.accountName),1),e(d,{type:C(a.status),size:"small"},{default:t(()=>[r(o(A(a.status)),1)]),_:2},1032,["type"])]),e(U,{class:"account-icon"},{default:t(()=>[(c(),f(pe(H(a.platform))))]),_:2},1024)]),s("div",je,[s("div",Qe,[l[3]||(l[3]=s("span",{class:"metric-label"},"今日Token:",-1)),s("span",We,o(u(F)(a.todayTokenUsage)),1)]),s("div",Ye,[l[4]||(l[4]=s("span",{class:"metric-label"},"今日费用:",-1)),s("span",Je,o(u(G)(a.todayExpense)),1)]),s("div",Ke,[l[5]||(l[5]=s("span",{class:"metric-label"},"近10分钟RPM:",-1)),s("span",Xe,o(a.recentAvgRpm),1)])]),a.group?(c(),_("div",Ze,[e(W),s("div",et,[s("div",tt,[e(U,null,{default:t(()=>[e(u(ze))]),_:1}),s("span",null,o(a.group.name),1)]),s("div",at,[s("span",st," 总用户: "+o(a.group.totalMembers),1),s("span",lt," 活跃: "+o(a.group.activeMembers),1)])])])):x("",!0),s("div",ot,[e(T,{type:"info",size:"small"},{default:t(()=>[r(" 最后使用: "+o(u(O)(a.lastUsedAt)),1)]),_:2},1024)])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),e(I,null,{header:t(()=>[s("div",nt,[l[7]||(l[7]=s("span",null,"账号详细统计",-1)),s("div",it,[e(Y,{modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=a=>y.value=a),placeholder:"搜索账号","prefix-icon":u(we),clearable:"",style:{width:"200px","margin-right":"8px"}},null,8,["modelValue","prefix-icon"]),e(J,{modelValue:h.value,"onUpdate:modelValue":l[1]||(l[1]=a=>h.value=a),placeholder:"选择平台",clearable:"",style:{width:"150px","margin-right":"8px"}},{default:t(()=>[e(b,{label:"全部平台",value:""}),e(b,{label:"Claude Console",value:"claude-console"}),e(b,{label:"Claude",value:"claude"}),e(b,{label:"Gemini",value:"gemini"}),e(b,{label:"OpenAI",value:"openai"})]),_:1},8,["modelValue"]),e(P,{type:"primary",icon:u(Te),loading:u(g).loading,onClick:V},{default:t(()=>[...l[6]||(l[6]=[r(" 刷新 ",-1)])]),_:1},8,["icon","loading"])])])]),default:t(()=>[ue((c(),f(Z,{data:q.value,stripe:"",style:{width:"100%"},flexible:!0,onRowClick:w},{default:t(()=>[e(p,{prop:"accountName",label:"账号名称","min-width":"150"},{default:t(({row:a})=>[s("div",ct,[e(T,{strong:""},{default:t(()=>[r(o(a.accountName),1)]),_:2},1024),e(d,{type:N(a.platform),size:"small"},{default:t(()=>[r(o(S(a.platform)),1)]),_:2},1032,["type"])])]),_:1}),e(p,{prop:"todayTokenUsage",label:"今日Token使用量","min-width":"140",sortable:""},{default:t(({row:a})=>[s("span",rt,o(u(F)(a.todayTokenUsage)),1)]),_:1}),e(p,{prop:"todayExpense",label:"今日费用消耗","min-width":"130",sortable:""},{default:t(({row:a})=>[s("span",ut,o(u(G)(a.todayExpense)),1)]),_:1}),e(p,{prop:"recentAvgRpm",label:"近10分钟RPM","min-width":"120",sortable:""},{default:t(({row:a})=>[s("div",dt,[e(K,{percentage:j(a.recentAvgRpm),"stroke-width":6,"show-text":!1,color:Q(a.recentAvgRpm)},null,8,["percentage","color"]),s("span",pt,o(a.recentAvgRpm),1)])]),_:1}),e(p,{prop:"group",label:"账号所属分组","min-width":"130"},{default:t(({row:a})=>[a.group?(c(),f(d,{key:0,type:"primary",size:"small"},{default:t(()=>[r(o(a.group.name),1)]),_:2},1024)):(c(),_("span",_t,"无分组"))]),_:1}),e(p,{prop:"group.totalMembers",label:"分组用户数",width:"110"},{default:t(({row:a})=>[a.group?(c(),_("span",mt,o(a.group.totalMembers),1)):(c(),_("span",ft,"-"))]),_:1}),e(p,{prop:"group.activeMembers",label:"分组活跃用户","min-width":"130"},{default:t(({row:a})=>[a.group?(c(),_("span",vt,o(a.group.activeMembers)+"/"+o(a.group.totalMembers),1)):(c(),_("span",gt,"-"))]),_:1}),e(p,{prop:"status",label:"状态",width:"90",align:"center"},{default:t(({row:a})=>[e(d,{type:C(a.status),size:"small"},{default:t(()=>[r(o(A(a.status)),1)]),_:2},1032,["type"])]),_:1}),e(p,{prop:"lastUsedAt",label:"最后使用时间","min-width":"150"},{default:t(({row:a})=>[e(X,{content:new Date(a.lastUsedAt).toLocaleString()},{default:t(()=>[s("span",null,o(u(O)(a.lastUsedAt)),1)]),_:2},1032,["content"])]),_:1}),e(p,{label:"操作","min-width":"120",fixed:"right"},{default:t(({row:a})=>[e(P,{size:"small",onClick:de(se=>w(a),["stop"])},{default:t(()=>[...l[8]||(l[8]=[r(" 详情 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[ae,u(g).loading]])]),_:1}),e(te,{modelValue:E.value,"onUpdate:modelValue":l[2]||(l[2]=a=>E.value=a),title:`账号详情: ${(L=i.value)==null?void 0:L.accountName}`,width:"1000px"},{default:t(()=>[i.value?(c(),_("div",bt,[e(ee,null,{default:t(()=>[e(B,{label:"基本信息",name:"basic"},{default:t(()=>[e(D,{gutter:16},{default:t(()=>[e(v,{span:12},{default:t(()=>[e(z,{title:"账号信息",column:1,border:""},{default:t(()=>[e(m,{label:"账号名称"},{default:t(()=>[r(o(i.value.accountName),1)]),_:1}),e(m,{label:"平台"},{default:t(()=>[e(d,{type:N(i.value.platform)},{default:t(()=>[r(o(S(i.value.platform)),1)]),_:1},8,["type"])]),_:1}),e(m,{label:"状态"},{default:t(()=>[e(d,{type:C(i.value.status)},{default:t(()=>[r(o(A(i.value.status)),1)]),_:1},8,["type"])]),_:1}),e(m,{label:"是否活跃"},{default:t(()=>[e(d,{type:i.value.isActive?"success":"danger"},{default:t(()=>[r(o(i.value.isActive?"是":"否"),1)]),_:1},8,["type"])]),_:1}),e(m,{label:"最后使用时间"},{default:t(()=>[r(o(new Date(i.value.lastUsedAt).toLocaleString()),1)]),_:1})]),_:1})]),_:1}),e(v,{span:12},{default:t(()=>[e(z,{title:"分组信息",column:1,border:""},{default:t(()=>[e(m,{label:"所属分组"},{default:t(()=>[i.value.group?(c(),f(d,{key:0,type:"primary"},{default:t(()=>[r(o(i.value.group.name),1)]),_:1})):(c(),_("span",yt,"无分组"))]),_:1}),i.value.group?(c(),f(m,{key:0,label:"分组总用户数"},{default:t(()=>[r(o(i.value.group.totalMembers),1)]),_:1})):x("",!0),i.value.group?(c(),f(m,{key:1,label:"分组活跃用户数"},{default:t(()=>[r(o(i.value.group.activeMembers),1)]),_:1})):x("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e(B,{label:"使用统计",name:"usage"},{default:t(()=>[e(D,{gutter:16},{default:t(()=>[e(v,{span:8},{default:t(()=>[e(M,{title:"今日Token使用量",value:i.value.todayTokenUsage},null,8,["value"])]),_:1}),e(v,{span:8},{default:t(()=>[e(M,{title:"今日费用消耗",value:i.value.todayExpense,precision:"2",prefix:"$"},null,8,["value"])]),_:1}),e(v,{span:8},{default:t(()=>[e(M,{title:"近10分钟平均RPM",value:i.value.recentAvgRpm},null,8,["value"])]),_:1})]),_:1}),s("div",ht,[e(T,{type:"info"},{default:t(()=>[...l[9]||(l[9]=[r("使用趋势图表功能开发中...",-1)])]),_:1})])]),_:1})]),_:1})])):x("",!0)]),_:1},8,["modelValue","title"])])}}}),Bt=le(kt,[["__scopeId","data-v-5e0551ac"]]);export{Bt as default};
