import{_ as L}from"./_plugin-vue_export-helper-BJA4NJ9J.js";/* empty css                    *//* empty css               */import{f as T,a as v}from"./format-B4y3xwuR.js";/* empty css                */import{u as X,i as j,a as Q,b as W,c as Y,d as Z,e as tt,f as st,g as et,H as g}from"./echarts-C6-n58JG.js";import{H as at,I as ot,J as nt,g as it,k as lt,K as M,L as ct,M as dt,N as rt,u as _t,O as ut,P as pt,Q as mt,R as ht}from"./element-plus-7iBGeLeB.js";import{u as ft}from"./index-BkPn-YD4.js";import{l as vt,r as yt,c as f,e as gt,m as p,t,K as s,D as e,q as m,u as a,I as d,H as x,F as b,J as P,$ as R,aq as xt,ar as bt}from"./vue-vendor-CPEpqY2A.js";import"./utils-C5IX4h6x.js";const l=y=>(xt("data-v-7f31f0be"),y=y(),bt(),y),kt={class:"overview-view"},wt={class:"stats-overview"},Tt={class:"stat-content"},Mt={class:"stat-icon"},St={class:"stat-info"},qt={class:"stat-number"},Ct=l(()=>t("div",{class:"stat-title"},"活跃API Keys",-1)),At={class:"stat-trend"},Ot=l(()=>t("span",{class:"trend-text"},"+5.2%",-1)),It={class:"stat-content"},$t={class:"stat-icon expense"},Et={class:"stat-info"},Vt={class:"stat-number"},Dt=l(()=>t("div",{class:"stat-title"},"今日总消费",-1)),Pt={class:"stat-trend"},Rt=l(()=>t("span",{class:"trend-text"},"-2.1%",-1)),Nt={class:"stat-content"},Ut={class:"stat-icon requests"},Bt={class:"stat-info"},zt={class:"stat-number"},Ht=l(()=>t("div",{class:"stat-title"},"今日总请求",-1)),Kt={class:"stat-trend"},Ft=l(()=>t("span",{class:"trend-text"},"+8.7%",-1)),Gt={class:"stat-content"},Jt={class:"stat-icon accounts"},Lt={class:"stat-info"},Xt={class:"stat-number"},jt=l(()=>t("div",{class:"stat-title"},"活跃账号",-1)),Qt={class:"stat-trend"},Wt=l(()=>t("span",{class:"trend-text"},"+1.3%",-1)),Yt={class:"chart-header"},Zt=l(()=>t("span",null,"今日请求趋势",-1)),ts={class:"chart-container"},ss=l(()=>t("span",null,"Token使用分布",-1)),es={class:"chart-container"},as=l(()=>t("span",null,"费用趋势",-1)),os={class:"chart-container"},ns=l(()=>t("span",null,"平台分布",-1)),is={class:"chart-container"},ls={class:"chart-header"},cs=l(()=>t("span",null,"实时系统指标",-1)),ds={class:"system-metrics"},rs={key:0,class:"metric-item"},_s=l(()=>t("div",{class:"metric-label"},"每分钟请求",-1)),us={class:"metric-value"},ps={key:1,class:"metric-item"},ms=l(()=>t("div",{class:"metric-label"},"总Token",-1)),hs={class:"metric-value"},fs={key:2,class:"metric-item"},vs=l(()=>t("div",{class:"metric-label"},"输入Token",-1)),ys={class:"metric-value"},gs={key:3,class:"metric-item"},xs=l(()=>t("div",{class:"metric-label"},"输出Token",-1)),bs={class:"metric-value"},ks=l(()=>t("span",null,"使用量TOP API Keys",-1)),ws={class:"top-list"},Ts={class:"rank"},Ms={class:"item-info"},Ss={class:"item-name"},qs={class:"item-detail"},Cs={class:"item-progress"},As=l(()=>t("span",null,"使用量TOP 账号",-1)),Os={class:"top-list"},Is={class:"rank"},$s={class:"item-info"},Es={class:"item-name"},Vs={class:"item-detail"},Ds={class:"item-progress"},Ps=vt({__name:"OverviewView",setup(y){X([j,Q,W,Y,Z,tt,st,et]);const i=ft(),S=yt("24h"),q=f(()=>i.apiKeys.sort((r,_)=>{var n,o,c,h;return(((o=(n=_.usage)==null?void 0:n.today)==null?void 0:o.requests)||0)-(((h=(c=r.usage)==null?void 0:c.today)==null?void 0:h.requests)||0)}).slice(0,5)),C=f(()=>{if(!i.systemMetrics)return"info";const r=i.systemMetrics.requests;return r>100?"danger":r>50?"warning":"success"}),N=f(()=>({success:"正常",warning:"繁忙",danger:"高负载",info:"无数据"})[C.value]||"无数据"),U=f(()=>{const r=Array.from({length:24},(n,o)=>`${o.toString().padStart(2,"0")}:00`),_=Array.from({length:24},()=>Math.floor(Math.random()*100)+50);return{tooltip:{trigger:"axis",formatter:"{a}: {c} 请求"},xAxis:{type:"category",data:r,boundaryGap:!1},yAxis:{type:"value",name:"请求数"},series:[{name:"请求数",type:"line",data:_,smooth:!0,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(59, 130, 246, 0.5)"},{offset:1,color:"rgba(59, 130, 246, 0.1)"}]}},lineStyle:{color:"#3b82f6"}}]}}),B=f(()=>({tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c}% ({d}%)"},series:[{name:"Token分布",type:"pie",radius:["40%","70%"],data:[{name:"Input Tokens",value:45},{name:"Output Tokens",value:30},{name:"Cache Create",value:15},{name:"Cache Read",value:10}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})),z=f(()=>({tooltip:{trigger:"axis",formatter:"{a}: ${c}"},xAxis:{type:"category",data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value",name:"费用 ($)"},series:[{name:"费用",type:"bar",data:[120,132,101,134,90,230,210],itemStyle:{color:"#10b981"}}]})),H=f(()=>{const r=i.accounts.reduce((n,o)=>(n[o.platform]=(n[o.platform]||0)+1,n),{}),_=Object.entries(r).map(([n,o])=>({name:n,value:o}));return{tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},series:[{name:"平台分布",type:"pie",radius:"60%",data:_,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}),K=r=>{const _=Math.max(...q.value.map(n=>{var o,c;return((c=(o=n.usage)==null?void 0:o.today)==null?void 0:c.requests)||0}));return _>0?r/_*100:0},F=r=>{const _=Math.max(...i.topUsageAccounts.map(n=>n.todayTokenUsage));return _>0?r/_*100:0};return gt(()=>{i.initializeData()}),(r,_)=>{const n=it,o=nt,c=ot,h=at,k=pt,G=ut,J=mt,A=ht;return m(),p("div",kt,[t("div",wt,[s(h,{gutter:16},{default:e(()=>[s(c,{span:6},{default:e(()=>[s(o,{class:"stat-card"},{default:e(()=>[t("div",Tt,[t("div",Mt,[s(n,null,{default:e(()=>[s(a(lt))]),_:1})]),t("div",St,[t("div",qt,d(a(i).activeApiKeys.length),1),Ct,t("div",At,[s(n,{class:"trend-icon up"},{default:e(()=>[s(a(M))]),_:1}),Ot])])])]),_:1})]),_:1}),s(c,{span:6},{default:e(()=>[s(o,{class:"stat-card"},{default:e(()=>[t("div",It,[t("div",$t,[s(n,null,{default:e(()=>[s(a(ct))]),_:1})]),t("div",Et,[t("div",Vt,d(a(T)(a(i).totalDailyCost)),1),Dt,t("div",Pt,[s(n,{class:"trend-icon down"},{default:e(()=>[s(a(dt))]),_:1}),Rt])])])]),_:1})]),_:1}),s(c,{span:6},{default:e(()=>[s(o,{class:"stat-card"},{default:e(()=>[t("div",Nt,[t("div",Ut,[s(n,null,{default:e(()=>[s(a(rt))]),_:1})]),t("div",Bt,[t("div",zt,d(a(v)(a(i).totalTodayRequests)),1),Ht,t("div",Kt,[s(n,{class:"trend-icon up"},{default:e(()=>[s(a(M))]),_:1}),Ft])])])]),_:1})]),_:1}),s(c,{span:6},{default:e(()=>[s(o,{class:"stat-card"},{default:e(()=>[t("div",Gt,[t("div",Jt,[s(n,null,{default:e(()=>[s(a(_t))]),_:1})]),t("div",Lt,[t("div",Xt,d(a(i).activeAccountsCount),1),jt,t("div",Qt,[s(n,{class:"trend-icon up"},{default:e(()=>[s(a(M))]),_:1}),Wt])])])]),_:1})]),_:1})]),_:1})]),s(h,{gutter:16},{default:e(()=>[s(c,{span:12},{default:e(()=>[s(o,null,{header:e(()=>[t("div",Yt,[Zt,s(G,{modelValue:S.value,"onUpdate:modelValue":_[0]||(_[0]=u=>S.value=u),size:"small"},{default:e(()=>[s(k,{label:"24h"},{default:e(()=>[x("24小时")]),_:1}),s(k,{label:"12h"},{default:e(()=>[x("12小时")]),_:1}),s(k,{label:"6h"},{default:e(()=>[x("6小时")]),_:1})]),_:1},8,["modelValue"])])]),default:e(()=>[t("div",ts,[s(a(g),{option:a(U),style:{height:"300px"}},null,8,["option"])])]),_:1})]),_:1}),s(c,{span:12},{default:e(()=>[s(o,null,{header:e(()=>[ss]),default:e(()=>[t("div",es,[s(a(g),{option:a(B),style:{height:"300px"}},null,8,["option"])])]),_:1})]),_:1})]),_:1}),s(h,{gutter:16,style:{"margin-top":"16px"}},{default:e(()=>[s(c,{span:8},{default:e(()=>[s(o,null,{header:e(()=>[as]),default:e(()=>[t("div",os,[s(a(g),{option:a(z),style:{height:"250px"}},null,8,["option"])])]),_:1})]),_:1}),s(c,{span:8},{default:e(()=>[s(o,null,{header:e(()=>[ns]),default:e(()=>[t("div",is,[s(a(g),{option:a(H),style:{height:"250px"}},null,8,["option"])])]),_:1})]),_:1}),s(c,{span:8},{default:e(()=>[s(o,null,{header:e(()=>[t("div",ls,[cs,s(J,{type:a(C),size:"small"},{default:e(()=>[x(d(a(N)),1)]),_:1},8,["type"])])]),default:e(()=>[t("div",ds,[a(i).systemMetrics?(m(),p("div",rs,[_s,t("div",us,d(a(i).systemMetrics.requests),1)])):b("",!0),a(i).systemMetrics?(m(),p("div",ps,[ms,t("div",hs,d(a(v)(a(i).systemMetrics.totalTokens)),1)])):b("",!0),a(i).systemMetrics?(m(),p("div",fs,[vs,t("div",ys,d(a(v)(a(i).systemMetrics.inputTokens)),1)])):b("",!0),a(i).systemMetrics?(m(),p("div",gs,[xs,t("div",bs,d(a(v)(a(i).systemMetrics.outputTokens)),1)])):b("",!0)])]),_:1})]),_:1})]),_:1}),s(h,{gutter:16,style:{"margin-top":"16px"}},{default:e(()=>[s(c,{span:12},{default:e(()=>[s(o,null,{header:e(()=>[ks]),default:e(()=>[t("div",ws,[(m(!0),p(P,null,R(a(q),(u,w)=>{var O,I,$,E,V,D;return m(),p("div",{key:u.keyId,class:"top-item"},[t("div",Ts,d(w+1),1),t("div",Ms,[t("div",Ss,d(u.name),1),t("div",qs,d(a(v)(((I=(O=u.usage)==null?void 0:O.today)==null?void 0:I.requests)||0))+" 请求 • "+d(a(T)(((E=($=u.usage)==null?void 0:$.today)==null?void 0:E.cost)||0)),1)]),t("div",Cs,[s(A,{percentage:K(((D=(V=u.usage)==null?void 0:V.today)==null?void 0:D.requests)||0),"stroke-width":6,"show-text":!1},null,8,["percentage"])])])}),128))])]),_:1})]),_:1}),s(c,{span:12},{default:e(()=>[s(o,null,{header:e(()=>[As]),default:e(()=>[t("div",Os,[(m(!0),p(P,null,R(a(i).topUsageAccounts,(u,w)=>(m(),p("div",{key:u.accountId,class:"top-item"},[t("div",Is,d(w+1),1),t("div",$s,[t("div",Es,d(u.accountName),1),t("div",Vs,d(a(v)(u.todayTokenUsage))+" Tokens • "+d(a(T)(u.todayExpense)),1)]),t("div",Ds,[s(A,{percentage:F(u.todayTokenUsage),"stroke-width":6,"show-text":!1},null,8,["percentage"])])]))),128))])]),_:1})]),_:1})]),_:1})])}}}),Ls=L(Ps,[["__scopeId","data-v-7f31f0be"]]);export{Ls as default};
