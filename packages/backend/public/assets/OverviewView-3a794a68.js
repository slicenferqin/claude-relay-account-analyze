import{u as H,i as J,a as Q,b as W,c as Y,d as Z,e as tt,f as st,g as et,S as b}from"./echarts-41a19f04.js";import{$ as at,u as a,a9 as ot,ad as d,ag as M,ah as nt,ai as it,aj as lt,aa as ct}from"./element-plus-7892819a.js";import{u as dt}from"./index-4886d59f.js";import{f as S,a as y}from"./format-96392f60.js";import{q as rt,c as v,o as _t,d as p,e as t,D as s,v as e,K as m,b as h,B as k,A as x,F as B,N as P,a5 as ut,a6 as pt}from"./vue-vendor-b6cd13bd.js";import{_ as ht}from"./_plugin-vue_export-helper-c27b6911.js";import"./utils-e3271d43.js";const l=g=>(ut("data-v-7f31f0be"),g=g(),pt(),g),mt={class:"overview-view"},ft={class:"stats-overview"},vt={class:"stat-content"},yt={class:"stat-icon"},gt={class:"stat-info"},bt={class:"stat-number"},xt=l(()=>t("div",{class:"stat-title"},"活跃API Keys",-1)),kt={class:"stat-trend"},wt=l(()=>t("span",{class:"trend-text"},"+5.2%",-1)),Tt={class:"stat-content"},Mt={class:"stat-icon expense"},St={class:"stat-info"},qt={class:"stat-number"},At=l(()=>t("div",{class:"stat-title"},"今日总消费",-1)),Ct={class:"stat-trend"},Ot=l(()=>t("span",{class:"trend-text"},"-2.1%",-1)),$t={class:"stat-content"},It={class:"stat-icon requests"},Vt={class:"stat-info"},Dt={class:"stat-number"},Nt=l(()=>t("div",{class:"stat-title"},"今日总请求",-1)),Ut={class:"stat-trend"},Bt=l(()=>t("span",{class:"trend-text"},"+8.7%",-1)),Pt={class:"stat-content"},Rt={class:"stat-icon accounts"},zt={class:"stat-info"},jt={class:"stat-number"},Et=l(()=>t("div",{class:"stat-title"},"活跃账号",-1)),Ft={class:"stat-trend"},Kt=l(()=>t("span",{class:"trend-text"},"+1.3%",-1)),Xt={class:"chart-header"},Gt=l(()=>t("span",null,"今日请求趋势",-1)),Lt=k("24小时"),Ht=k("12小时"),Jt=k("6小时"),Qt={class:"chart-container"},Wt=l(()=>t("span",null,"Token使用分布",-1)),Yt={class:"chart-container"},Zt=l(()=>t("span",null,"费用趋势",-1)),ts={class:"chart-container"},ss=l(()=>t("span",null,"平台分布",-1)),es={class:"chart-container"},as={class:"chart-header"},os=l(()=>t("span",null,"实时系统指标",-1)),ns={class:"system-metrics"},is={key:0,class:"metric-item"},ls=l(()=>t("div",{class:"metric-label"},"每分钟请求",-1)),cs={class:"metric-value"},ds={key:1,class:"metric-item"},rs=l(()=>t("div",{class:"metric-label"},"总Token",-1)),_s={class:"metric-value"},us={key:2,class:"metric-item"},ps=l(()=>t("div",{class:"metric-label"},"输入Token",-1)),hs={class:"metric-value"},ms={key:3,class:"metric-item"},fs=l(()=>t("div",{class:"metric-label"},"输出Token",-1)),vs={class:"metric-value"},ys=l(()=>t("span",null,"使用量TOP API Keys",-1)),gs={class:"top-list"},bs={class:"rank"},xs={class:"item-info"},ks={class:"item-name"},ws={class:"item-detail"},Ts={class:"item-progress"},Ms=l(()=>t("span",null,"使用量TOP 账号",-1)),Ss={class:"top-list"},qs={class:"rank"},As={class:"item-info"},Cs={class:"item-name"},Os={class:"item-detail"},$s={class:"item-progress"},Is=rt({setup(g){H([J,Q,W,Y,Z,tt,st,et]);const i=dt(),q=at("24h"),A=v(()=>i.apiKeys.sort((r,_)=>{var n,o,c,f;return(((o=(n=_.usage)==null?void 0:n.today)==null?void 0:o.requests)||0)-(((f=(c=r.usage)==null?void 0:c.today)==null?void 0:f.requests)||0)}).slice(0,5)),C=v(()=>{if(!i.systemMetrics)return"info";const r=i.systemMetrics.requests;return r>100?"danger":r>50?"warning":"success"}),R=v(()=>({success:"正常",warning:"繁忙",danger:"高负载",info:"无数据"})[C.value]||"无数据"),z=v(()=>{const r=Array.from({length:24},(n,o)=>`${o.toString().padStart(2,"0")}:00`),_=Array.from({length:24},()=>Math.floor(Math.random()*100)+50);return{tooltip:{trigger:"axis",formatter:"{a}: {c} 请求"},xAxis:{type:"category",data:r,boundaryGap:!1},yAxis:{type:"value",name:"请求数"},series:[{name:"请求数",type:"line",data:_,smooth:!0,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(59, 130, 246, 0.5)"},{offset:1,color:"rgba(59, 130, 246, 0.1)"}]}},lineStyle:{color:"#3b82f6"}}]}}),j=v(()=>({tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c}% ({d}%)"},series:[{name:"Token分布",type:"pie",radius:["40%","70%"],data:[{name:"Input Tokens",value:45},{name:"Output Tokens",value:30},{name:"Cache Create",value:15},{name:"Cache Read",value:10}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})),E=v(()=>({tooltip:{trigger:"axis",formatter:"{a}: ${c}"},xAxis:{type:"category",data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value",name:"费用 ($)"},series:[{name:"费用",type:"bar",data:[120,132,101,134,90,230,210],itemStyle:{color:"#10b981"}}]})),F=v(()=>{const r=i.accounts.reduce((n,o)=>(n[o.platform]=(n[o.platform]||0)+1,n),{}),_=Object.entries(r).map(([n,o])=>({name:n,value:o}));return{tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},series:[{name:"平台分布",type:"pie",radius:"60%",data:_,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}),K=r=>{const _=Math.max(...A.value.map(n=>{var o,c;return((c=(o=n.usage)==null?void 0:o.today)==null?void 0:c.requests)||0}));return _>0?r/_*100:0},X=r=>{const _=Math.max(...i.topUsageAccounts.map(n=>n.todayTokenUsage));return _>0?r/_*100:0};return _t(()=>{i.initializeData()}),(r,_)=>{const n=m("el-icon"),o=m("el-card"),c=m("el-col"),f=m("el-row"),w=m("el-radio-button"),G=m("el-radio-group"),L=m("el-tag"),O=m("el-progress");return h(),p("div",mt,[t("div",ft,[s(f,{gutter:16},{default:e(()=>[s(c,{span:6},{default:e(()=>[s(o,{class:"stat-card"},{default:e(()=>[t("div",vt,[t("div",yt,[s(n,null,{default:e(()=>[s(a(ot))]),_:1})]),t("div",gt,[t("div",bt,d(a(i).activeApiKeys.length),1),xt,t("div",kt,[s(n,{class:"trend-icon up"},{default:e(()=>[s(a(M))]),_:1}),wt])])])]),_:1})]),_:1}),s(c,{span:6},{default:e(()=>[s(o,{class:"stat-card"},{default:e(()=>[t("div",Tt,[t("div",Mt,[s(n,null,{default:e(()=>[s(a(nt))]),_:1})]),t("div",St,[t("div",qt,d(a(S)(a(i).totalDailyCost)),1),At,t("div",Ct,[s(n,{class:"trend-icon down"},{default:e(()=>[s(a(it))]),_:1}),Ot])])])]),_:1})]),_:1}),s(c,{span:6},{default:e(()=>[s(o,{class:"stat-card"},{default:e(()=>[t("div",$t,[t("div",It,[s(n,null,{default:e(()=>[s(a(lt))]),_:1})]),t("div",Vt,[t("div",Dt,d(a(y)(a(i).totalTodayRequests)),1),Nt,t("div",Ut,[s(n,{class:"trend-icon up"},{default:e(()=>[s(a(M))]),_:1}),Bt])])])]),_:1})]),_:1}),s(c,{span:6},{default:e(()=>[s(o,{class:"stat-card"},{default:e(()=>[t("div",Pt,[t("div",Rt,[s(n,null,{default:e(()=>[s(a(ct))]),_:1})]),t("div",zt,[t("div",jt,d(a(i).activeAccountsCount),1),Et,t("div",Ft,[s(n,{class:"trend-icon up"},{default:e(()=>[s(a(M))]),_:1}),Kt])])])]),_:1})]),_:1})]),_:1})]),s(f,{gutter:16},{default:e(()=>[s(c,{span:12},{default:e(()=>[s(o,null,{header:e(()=>[t("div",Xt,[Gt,s(G,{modelValue:q.value,"onUpdate:modelValue":_[0]||(_[0]=u=>q.value=u),size:"small"},{default:e(()=>[s(w,{label:"24h"},{default:e(()=>[Lt]),_:1}),s(w,{label:"12h"},{default:e(()=>[Ht]),_:1}),s(w,{label:"6h"},{default:e(()=>[Jt]),_:1})]),_:1},8,["modelValue"])])]),default:e(()=>[t("div",Qt,[s(a(b),{option:a(z),style:{height:"300px"}},null,8,["option"])])]),_:1})]),_:1}),s(c,{span:12},{default:e(()=>[s(o,null,{header:e(()=>[Wt]),default:e(()=>[t("div",Yt,[s(a(b),{option:a(j),style:{height:"300px"}},null,8,["option"])])]),_:1})]),_:1})]),_:1}),s(f,{gutter:16,style:{"margin-top":"16px"}},{default:e(()=>[s(c,{span:8},{default:e(()=>[s(o,null,{header:e(()=>[Zt]),default:e(()=>[t("div",ts,[s(a(b),{option:a(E),style:{height:"250px"}},null,8,["option"])])]),_:1})]),_:1}),s(c,{span:8},{default:e(()=>[s(o,null,{header:e(()=>[ss]),default:e(()=>[t("div",es,[s(a(b),{option:a(F),style:{height:"250px"}},null,8,["option"])])]),_:1})]),_:1}),s(c,{span:8},{default:e(()=>[s(o,null,{header:e(()=>[t("div",as,[os,s(L,{type:a(C),size:"small"},{default:e(()=>[k(d(a(R)),1)]),_:1},8,["type"])])]),default:e(()=>[t("div",ns,[a(i).systemMetrics?(h(),p("div",is,[ls,t("div",cs,d(a(i).systemMetrics.requests),1)])):x("",!0),a(i).systemMetrics?(h(),p("div",ds,[rs,t("div",_s,d(a(y)(a(i).systemMetrics.totalTokens)),1)])):x("",!0),a(i).systemMetrics?(h(),p("div",us,[ps,t("div",hs,d(a(y)(a(i).systemMetrics.inputTokens)),1)])):x("",!0),a(i).systemMetrics?(h(),p("div",ms,[fs,t("div",vs,d(a(y)(a(i).systemMetrics.outputTokens)),1)])):x("",!0)])]),_:1})]),_:1})]),_:1}),s(f,{gutter:16,style:{"margin-top":"16px"}},{default:e(()=>[s(c,{span:12},{default:e(()=>[s(o,null,{header:e(()=>[ys]),default:e(()=>[t("div",gs,[(h(!0),p(B,null,P(a(A),(u,T)=>{var $,I,V,D,N,U;return h(),p("div",{key:u.keyId,class:"top-item"},[t("div",bs,d(T+1),1),t("div",xs,[t("div",ks,d(u.name),1),t("div",ws,d(a(y)(((I=($=u.usage)==null?void 0:$.today)==null?void 0:I.requests)||0))+" 请求 • "+d(a(S)(((D=(V=u.usage)==null?void 0:V.today)==null?void 0:D.cost)||0)),1)]),t("div",Ts,[s(O,{percentage:K(((U=(N=u.usage)==null?void 0:N.today)==null?void 0:U.requests)||0),"stroke-width":6,"show-text":!1},null,8,["percentage"])])])}),128))])]),_:1})]),_:1}),s(c,{span:12},{default:e(()=>[s(o,null,{header:e(()=>[Ms]),default:e(()=>[t("div",Ss,[(h(!0),p(B,null,P(a(i).topUsageAccounts,(u,T)=>(h(),p("div",{key:u.accountId,class:"top-item"},[t("div",qs,d(T+1),1),t("div",As,[t("div",Cs,d(u.accountName),1),t("div",Os,d(a(y)(u.todayTokenUsage))+" Tokens • "+d(a(S)(u.todayExpense)),1)]),t("div",$s,[s(O,{percentage:X(u.todayTokenUsage),"stroke-width":6,"show-text":!1},null,8,["percentage"])])]))),128))])]),_:1})]),_:1})]),_:1})])}}});const zs=ht(Is,[["__scopeId","data-v-7f31f0be"]]);export{zs as default};
