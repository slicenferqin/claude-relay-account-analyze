import{q as le,a4 as ce,c as i,o as de,l as re,d as z,D as e,v as t,K as o,b as C,e as a,B as _,t as B,z as N,A as ue,T as _e,a5 as ie,a6 as fe}from"./vue-vendor-b6cd13bd.js";import{$ as k,a6 as me,a7 as pe,u as n,a8 as he,a9 as ve,aa as be,ab as ge,ac as we,ad as R,n as xe,ae as Ce,af as ye}from"./element-plus-7892819a.js";import{u as Se,a as ke}from"./index-4886d59f.js";import{_ as Re}from"./_plugin-vue_export-helper-c27b6911.js";import"./utils-e3271d43.js";const f=b=>(ie("data-v-762a3e5c"),b=b(),fe(),b),Ie={class:"dashboard-layout"},Ae=f(()=>a("div",{class:"logo"},[a("h2",null,"账号看板"),a("span",{class:"subtitle"},"Account Dashboard")],-1)),De=f(()=>a("span",null,"总览",-1)),Ve=f(()=>a("span",null,"API Key管理",-1)),Te=f(()=>a("span",null,"账号管理",-1)),Me=f(()=>a("span",null,"分组管理",-1)),ze=f(()=>a("span",null,"数据分析",-1)),Be={class:"header-left"},Ne={class:"page-title"},Ue=_("看板"),$e={class:"header-right"},Ee={class:"connection-status"},Le={key:0,class:"last-refresh"},qe={class:"el-text",size:"small",type:"info"},Ke=_("刷新间隔"),Pe=_("导出数据"),je=_("关于"),Fe={class:"settings-content"},Ge={class:"dialog-footer"},He=_("取消"),Je=_("确定"),Oe=le({setup(b){const I=ce(),s=Se(),m=ke(),U=d=>{const l=new Date(d),c=new Date().getTime()-l.getTime();return c<6e4?"刚刚":c<36e5?`${Math.floor(c/6e4)}分钟前`:c<864e5?`${Math.floor(c/36e5)}小时前`:l.toLocaleDateString("zh-CN")},p=k(!1),y=k(s.refreshInterval),g=k(null),$=i(()=>I.path),A=i(()=>I.meta.title||"看板"),D=i(()=>s.lastRefresh),E=i(()=>m.isConnected?"connected":"disconnected"),L=i(()=>m.isConnected?me:pe),q=i(()=>m.isConnected?"实时连接正常":m.connectionError||"连接已断开"),V=async()=>{await s.refreshAllData()},K=d=>{d?w():h()},P=d=>{s.setRefreshInterval(d),s.isAutoRefresh&&(h(),w())},w=()=>{h(),g.value=window.setInterval(async()=>{s.loading||await V()},s.refreshInterval)},h=()=>{g.value&&(clearInterval(g.value),g.value=null)},j=d=>{switch(d){case"refresh-interval":p.value=!0;break;case"export":console.log("Export data");break;case"about":console.log("About");break}},F=()=>{s.setRefreshInterval(y.value),p.value=!1,s.isAutoRefresh&&(h(),w())};return de(()=>{m.subscribeToSystemMetrics(),s.isAutoRefresh&&w()}),re(()=>{h()}),(d,l)=>{const u=o("el-icon"),c=o("el-menu-item"),G=o("el-menu"),H=o("el-aside"),T=o("el-breadcrumb-item"),J=o("el-breadcrumb"),O=o("el-tooltip"),Q=o("el-switch"),x=o("el-button"),S=o("el-dropdown-item"),W=o("el-dropdown-menu"),X=o("el-dropdown"),Y=o("el-header"),Z=o("router-view"),ee=o("el-main"),M=o("el-container"),v=o("el-option"),te=o("el-select"),oe=o("el-form-item"),ne=o("el-form"),ae=o("el-dialog");return C(),z("div",Ie,[e(M,null,{default:t(()=>[e(H,{width:"250px",class:"sidebar"},{default:t(()=>[Ae,e(G,{"default-active":n($),class:"sidebar-menu",router:"","unique-opened":""},{default:t(()=>[e(c,{index:"/dashboard/overview"},{default:t(()=>[e(u,null,{default:t(()=>[e(n(he))]),_:1}),De]),_:1}),e(c,{index:"/dashboard/apikeys"},{default:t(()=>[e(u,null,{default:t(()=>[e(n(ve))]),_:1}),Ve]),_:1}),e(c,{index:"/dashboard/accounts"},{default:t(()=>[e(u,null,{default:t(()=>[e(n(be))]),_:1}),Te]),_:1}),e(c,{index:"/dashboard/groups"},{default:t(()=>[e(u,null,{default:t(()=>[e(n(ge))]),_:1}),Me]),_:1}),e(c,{index:"/dashboard/analytics"},{default:t(()=>[e(u,null,{default:t(()=>[e(n(we))]),_:1}),ze]),_:1})]),_:1},8,["default-active"])]),_:1}),e(M,null,{default:t(()=>[e(Y,{class:"header"},{default:t(()=>[a("div",Be,[a("h3",Ne,R(n(A)),1),e(J,{separator:"/"},{default:t(()=>[e(T,null,{default:t(()=>[Ue]),_:1}),e(T,null,{default:t(()=>[_(R(n(A)),1)]),_:1})]),_:1})]),a("div",$e,[a("div",Ee,[e(O,{content:n(q),placement:"bottom"},{default:t(()=>[e(u,{class:xe(["status-icon",n(E)]),size:16},{default:t(()=>[(C(),B(N(n(L))))]),_:1},8,["class"])]),_:1},8,["content"])]),n(D)?(C(),z("div",Le,[a("span",qe," 最后刷新: "+R(U(n(D))),1)])):ue("",!0),e(Q,{modelValue:n(s).isAutoRefresh,"onUpdate:modelValue":l[0]||(l[0]=r=>n(s).isAutoRefresh=r),"inline-prompt":"","active-text":"自动","inactive-text":"手动",onChange:K},null,8,["modelValue"]),e(x,{circle:"",icon:n(Ce),loading:n(s).loading,onClick:V,title:"刷新数据"},null,8,["icon","loading"]),e(X,{onCommand:j},{dropdown:t(()=>[e(W,null,{default:t(()=>[e(S,{command:"refresh-interval"},{default:t(()=>[Ke]),_:1}),e(S,{command:"export"},{default:t(()=>[Pe]),_:1}),e(S,{command:"about"},{default:t(()=>[je]),_:1})]),_:1})]),default:t(()=>[e(x,{circle:"",icon:n(ye)},null,8,["icon"])]),_:1})])]),_:1}),e(ee,{class:"main-content"},{default:t(()=>[e(Z,null,{default:t(({Component:r,route:se})=>[e(_e,{name:"fade",mode:"out-in"},{default:t(()=>[(C(),B(N(r),{key:se.path}))]),_:2},1024)]),_:1})]),_:1})]),_:1})]),_:1}),e(ae,{modelValue:p.value,"onUpdate:modelValue":l[3]||(l[3]=r=>p.value=r),title:"设置",width:"500px"},{footer:t(()=>[a("span",Ge,[e(x,{onClick:l[2]||(l[2]=r=>p.value=!1)},{default:t(()=>[He]),_:1}),e(x,{type:"primary",onClick:F},{default:t(()=>[Je]),_:1})])]),default:t(()=>[a("div",Fe,[e(ne,{"label-width":"120px"},{default:t(()=>[e(oe,{label:"刷新间隔"},{default:t(()=>[e(te,{modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=r=>y.value=r),placeholder:"选择刷新间隔",onChange:P},{default:t(()=>[e(v,{label:"5秒",value:5e3}),e(v,{label:"10秒",value:1e4}),e(v,{label:"30秒",value:3e4}),e(v,{label:"1分钟",value:6e4}),e(v,{label:"5分钟",value:3e5})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1},8,["modelValue"])])}}});const et=Re(Oe,[["__scopeId","data-v-762a3e5c"]]);export{et as default};
