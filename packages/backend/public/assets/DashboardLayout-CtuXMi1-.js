import{_ as se}from"./_plugin-vue_export-helper-vHbaxTkL.js";/* empty css                   *//* empty css                  *//* empty css               *//* empty css                  *//* empty css                */import{q as le,c as i,o as ce,l as re,b as M,D as e,v as t,a4 as de,K as ue,d as a,B as u,z as ie,t as T,A as B,T as _e,a5 as fe,a6 as me,f as E}from"./vue-vendor-BkJYhFEr.js";import{_ as I,a5 as pe,a6 as he,a7 as ve,a8 as be,u as o,a9 as ge,aa as we,ab as Ee,ac as xe,ad as Ce,ae as Ie,af as Se,ag as ye,ah as S,ai as ke,aj as De,ak as Re,n as Ae,al as Ve,am as Me,an as Te,ao as Be,ap as ze,aq as Ne,ar as Ue,as as qe,at as Le,au as $e,av as Fe,aw as Ke,ax as Pe,ay as je}from"./element-plus-BlTo_VXI.js";import{u as He,a as Oe}from"./index-CL1UbGLD.js";import"./utils-2ne8F3OK.js";const _=v=>(fe("data-v-762a3e5c"),v=v(),me(),v),Ge={class:"dashboard-layout"},Je=_(()=>a("div",{class:"logo"},[a("h2",null,"账号看板"),a("span",{class:"subtitle"},"Account Dashboard")],-1)),Qe=_(()=>a("span",null,"总览",-1)),We=_(()=>a("span",null,"API Key管理",-1)),Xe=_(()=>a("span",null,"账号管理",-1)),Ye=_(()=>a("span",null,"分组管理",-1)),Ze=_(()=>a("span",null,"数据分析",-1)),et={class:"header-left"},tt={class:"page-title"},ot=u("看板"),at={class:"header-right"},nt={class:"connection-status"},st={key:0,class:"last-refresh"},lt={class:"el-text",size:"small",type:"info"},ct=u("刷新间隔"),rt=u("导出数据"),dt=u("关于"),ut={class:"settings-content"},it={class:"dialog-footer"},_t=u("取消"),ft=u("确定"),mt=le({__name:"DashboardLayout",setup(v){const y=de(),n=He(),f=Oe(),z=c=>{const s=new Date(c),l=new Date().getTime()-s.getTime();return l<6e4?"刚刚":l<36e5?`${Math.floor(l/6e4)}分钟前`:l<864e5?`${Math.floor(l/36e5)}小时前`:s.toLocaleDateString("zh-CN")},m=I(!1),x=I(n.refreshInterval),b=I(null),N=i(()=>y.path),k=i(()=>y.meta.title||"看板"),D=i(()=>n.lastRefresh),U=i(()=>f.isConnected?"connected":"disconnected"),q=i(()=>f.isConnected?Pe:je),L=i(()=>f.isConnected?"实时连接正常":f.connectionError||"连接已断开"),R=async()=>{await n.refreshAllData()},$=c=>{c?g():p()},F=c=>{n.setRefreshInterval(c),n.isAutoRefresh&&(p(),g())},g=()=>{p(),b.value=window.setInterval(async()=>{n.loading||await R()},n.refreshInterval)},p=()=>{b.value&&(clearInterval(b.value),b.value=null)},K=c=>{switch(c){case"refresh-interval":m.value=!0;break;case"export":console.log("Export data");break;case"about":console.log("About");break}},P=()=>{n.setRefreshInterval(x.value),m.value=!1,n.isAutoRefresh&&(p(),g())};return ce(()=>{f.subscribeToSystemMetrics(),n.isAutoRefresh&&g()}),re(()=>{p()}),(c,s)=>{const d=we,l=ge,j=be,H=ve,A=De,O=ke,G=Re,J=Ve,w=Me,C=Ue,Q=Ne,W=Be,X=ye,Y=ue("router-view"),Z=qe,V=pe,h=Ke,ee=Fe,te=$e,oe=Le,ae=he;return E(),M("div",Ge,[e(V,null,{default:t(()=>[e(H,{width:"250px",class:"sidebar"},{default:t(()=>[Je,e(j,{"default-active":o(N),class:"sidebar-menu",router:"","unique-opened":""},{default:t(()=>[e(l,{index:"/dashboard/overview"},{default:t(()=>[e(d,null,{default:t(()=>[e(o(Ee))]),_:1}),Qe]),_:1}),e(l,{index:"/dashboard/apikeys"},{default:t(()=>[e(d,null,{default:t(()=>[e(o(xe))]),_:1}),We]),_:1}),e(l,{index:"/dashboard/accounts"},{default:t(()=>[e(d,null,{default:t(()=>[e(o(Ce))]),_:1}),Xe]),_:1}),e(l,{index:"/dashboard/groups"},{default:t(()=>[e(d,null,{default:t(()=>[e(o(Ie))]),_:1}),Ye]),_:1}),e(l,{index:"/dashboard/analytics"},{default:t(()=>[e(d,null,{default:t(()=>[e(o(Se))]),_:1}),Ze]),_:1})]),_:1},8,["default-active"])]),_:1}),e(V,null,{default:t(()=>[e(X,{class:"header"},{default:t(()=>[a("div",et,[a("h3",tt,S(o(k)),1),e(O,{separator:"/"},{default:t(()=>[e(A,null,{default:t(()=>[ot]),_:1}),e(A,null,{default:t(()=>[u(S(o(k)),1)]),_:1})]),_:1})]),a("div",at,[a("div",nt,[e(G,{content:o(L),placement:"bottom"},{default:t(()=>[e(d,{class:Ae(["status-icon",o(U)]),size:16},{default:t(()=>[(E(),T(B(o(q))))]),_:1},8,["class"])]),_:1},8,["content"])]),o(D)?(E(),M("div",st,[a("span",lt," 最后刷新: "+S(z(o(D))),1)])):ie("",!0),e(J,{modelValue:o(n).isAutoRefresh,"onUpdate:modelValue":s[0]||(s[0]=r=>o(n).isAutoRefresh=r),"inline-prompt":"","active-text":"自动","inactive-text":"手动",onChange:$},null,8,["modelValue"]),e(w,{circle:"",icon:o(Te),loading:o(n).loading,onClick:R,title:"刷新数据"},null,8,["icon","loading"]),e(W,{onCommand:K},{dropdown:t(()=>[e(Q,null,{default:t(()=>[e(C,{command:"refresh-interval"},{default:t(()=>[ct]),_:1}),e(C,{command:"export"},{default:t(()=>[rt]),_:1}),e(C,{command:"about"},{default:t(()=>[dt]),_:1})]),_:1})]),default:t(()=>[e(w,{circle:"",icon:o(ze)},null,8,["icon"])]),_:1})])]),_:1}),e(Z,{class:"main-content"},{default:t(()=>[e(Y,null,{default:t(({Component:r,route:ne})=>[e(_e,{name:"fade",mode:"out-in"},{default:t(()=>[(E(),T(B(r),{key:ne.path}))]),_:2},1024)]),_:1})]),_:1})]),_:1})]),_:1}),e(ae,{modelValue:m.value,"onUpdate:modelValue":s[3]||(s[3]=r=>m.value=r),title:"设置",width:"500px"},{footer:t(()=>[a("span",it,[e(w,{onClick:s[2]||(s[2]=r=>m.value=!1)},{default:t(()=>[_t]),_:1}),e(w,{type:"primary",onClick:P},{default:t(()=>[ft]),_:1})])]),default:t(()=>[a("div",ut,[e(oe,{"label-width":"120px"},{default:t(()=>[e(te,{label:"刷新间隔"},{default:t(()=>[e(ee,{modelValue:x.value,"onUpdate:modelValue":s[1]||(s[1]=r=>x.value=r),placeholder:"选择刷新间隔",onChange:F},{default:t(()=>[e(h,{label:"5秒",value:5e3}),e(h,{label:"10秒",value:1e4}),e(h,{label:"30秒",value:3e4}),e(h,{label:"1分钟",value:6e4}),e(h,{label:"5分钟",value:3e5})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1},8,["modelValue"])])}}}),St=se(mt,[["__scopeId","data-v-762a3e5c"]]);export{St as default};
