import{_ as le}from"./_plugin-vue_export-helper-BJA4NJ9J.js";/* empty css                   *//* empty css               *//* empty css                  *//* empty css                  */import{l as ce,r as I,c as i,e as re,M as de,m as V,K as e,D as t,ap as ue,ac as ie,u as o,t as a,I as y,H as d,F as _e,y as fe,C as T,G as B,T as me,aq as pe,ar as he,q as E}from"./vue-vendor-CPEpqY2A.js";import{b as ve,c as be,d as ge,e as we,f as Ee,g as Ce,o as xe,k as Ie,u as ye,h as Se,t as De,j as ke,l as Re,m as Ae,n as Me,p as Ve,q as Te,r as Be,s as ze,v as Ne,w as qe,x as Fe,y as Ue,z as Le,A as $e,B as Ge,C as He,D as Ke,F as Pe,G as je}from"./element-plus-7iBGeLeB.js";import{u as Oe,a as Je}from"./index-BkPn-YD4.js";import"./utils-C5IX4h6x.js";const _=v=>(pe("data-v-6f62cc50"),v=v(),he(),v),Qe={class:"dashboard-layout"},We=_(()=>a("div",{class:"logo"},[a("h2",null,"账号看板"),a("span",{class:"subtitle"},"Account Dashboard")],-1)),Xe=_(()=>a("span",null,"总览",-1)),Ye=_(()=>a("span",null,"API Key管理",-1)),Ze=_(()=>a("span",null,"账号管理",-1)),et=_(()=>a("span",null,"分组管理",-1)),tt=_(()=>a("span",null,"数据分析",-1)),ot={class:"header-left"},at={class:"page-title"},nt={class:"header-right"},st={class:"connection-status"},lt={key:0,class:"last-refresh"},ct={class:"settings-content"},rt={class:"dialog-footer"},dt=ce({__name:"DashboardLayout",setup(v){const S=ue(),n=Oe(),f=Je(),z=c=>{const s=new Date(c),l=new Date().getTime()-s.getTime();return l<6e4?"刚刚":l<36e5?`${Math.floor(l/6e4)}分钟前`:l<864e5?`${Math.floor(l/36e5)}小时前`:s.toLocaleDateString("zh-CN")},m=I(!1),C=I(n.refreshInterval),b=I(null),N=i(()=>S.path),D=i(()=>S.meta.title||"看板"),k=i(()=>n.lastRefresh),q=i(()=>f.isConnected?"connected":"disconnected"),F=i(()=>f.isConnected?Pe:je),U=i(()=>f.isConnected?"实时连接正常":f.connectionError||"连接已断开"),R=async()=>{await n.refreshAllData()},L=c=>{c?g():p()},$=c=>{n.setRefreshInterval(c),n.isAutoRefresh&&(p(),g())},g=()=>{p(),b.value=window.setInterval(async()=>{n.loading||await R()},n.refreshInterval)},p=()=>{b.value&&(clearInterval(b.value),b.value=null)},G=c=>{switch(c){case"refresh-interval":m.value=!0;break;case"export":console.log("Export data");break;case"about":console.log("About");break}},H=()=>{n.setRefreshInterval(C.value),m.value=!1,n.isAutoRefresh&&(p(),g())};return re(()=>{f.subscribeToSystemMetrics(),n.isAutoRefresh&&g()}),de(()=>{p()}),(c,s)=>{const u=Ce,l=Ee,K=we,P=ge,A=Ae,j=Re,O=Me,J=Ve,Q=Te,w=Be,x=Ue,W=Fe,X=Ne,Y=ke,Z=ie("router-view"),ee=Le,M=ve,h=Ke,te=He,oe=Ge,ae=$e,ne=be;return E(),V("div",Qe,[e(M,null,{default:t(()=>[e(P,{width:"250px",class:"sidebar"},{default:t(()=>[We,e(K,{"default-active":o(N),class:"sidebar-menu",router:"","unique-opened":""},{default:t(()=>[e(l,{index:"/dashboard/overview"},{default:t(()=>[e(u,null,{default:t(()=>[e(o(xe))]),_:1}),Xe]),_:1}),e(l,{index:"/dashboard/apikeys"},{default:t(()=>[e(u,null,{default:t(()=>[e(o(Ie))]),_:1}),Ye]),_:1}),e(l,{index:"/dashboard/accounts"},{default:t(()=>[e(u,null,{default:t(()=>[e(o(ye))]),_:1}),Ze]),_:1}),e(l,{index:"/dashboard/groups"},{default:t(()=>[e(u,null,{default:t(()=>[e(o(Se))]),_:1}),et]),_:1}),e(l,{index:"/dashboard/analytics"},{default:t(()=>[e(u,null,{default:t(()=>[e(o(De))]),_:1}),tt]),_:1})]),_:1},8,["default-active"])]),_:1}),e(M,null,{default:t(()=>[e(Y,{class:"header"},{default:t(()=>[a("div",ot,[a("h3",at,y(o(D)),1),e(j,{separator:"/"},{default:t(()=>[e(A,null,{default:t(()=>[d("看板")]),_:1}),e(A,null,{default:t(()=>[d(y(o(D)),1)]),_:1})]),_:1})]),a("div",nt,[a("div",st,[e(O,{content:o(U),placement:"bottom"},{default:t(()=>[e(u,{class:fe(["status-icon",o(q)]),size:16},{default:t(()=>[(E(),T(B(o(F))))]),_:1},8,["class"])]),_:1},8,["content"])]),o(k)?(E(),V("div",lt,[e(J,{size:"small",type:"info"},{default:t(()=>[d(" 最后刷新: "+y(z(o(k))),1)]),_:1})])):_e("",!0),e(Q,{modelValue:o(n).isAutoRefresh,"onUpdate:modelValue":s[0]||(s[0]=r=>o(n).isAutoRefresh=r),"inline-prompt":"","active-text":"自动","inactive-text":"手动",onChange:L},null,8,["modelValue"]),e(w,{circle:"",icon:o(ze),loading:o(n).loading,onClick:R,title:"刷新数据"},null,8,["icon","loading"]),e(X,{onCommand:G},{dropdown:t(()=>[e(W,null,{default:t(()=>[e(x,{command:"refresh-interval"},{default:t(()=>[d("刷新间隔")]),_:1}),e(x,{command:"export"},{default:t(()=>[d("导出数据")]),_:1}),e(x,{command:"about"},{default:t(()=>[d("关于")]),_:1})]),_:1})]),default:t(()=>[e(w,{circle:"",icon:o(qe)},null,8,["icon"])]),_:1})])]),_:1}),e(ee,{class:"main-content"},{default:t(()=>[e(Z,null,{default:t(({Component:r,route:se})=>[e(me,{name:"fade",mode:"out-in"},{default:t(()=>[(E(),T(B(r),{key:se.path}))]),_:2},1024)]),_:1})]),_:1})]),_:1})]),_:1}),e(ne,{modelValue:m.value,"onUpdate:modelValue":s[3]||(s[3]=r=>m.value=r),title:"设置",width:"500px"},{footer:t(()=>[a("span",rt,[e(w,{onClick:s[2]||(s[2]=r=>m.value=!1)},{default:t(()=>[d("取消")]),_:1}),e(w,{type:"primary",onClick:H},{default:t(()=>[d("确定")]),_:1})])]),default:t(()=>[a("div",ct,[e(ae,{"label-width":"120px"},{default:t(()=>[e(oe,{label:"刷新间隔"},{default:t(()=>[e(te,{modelValue:C.value,"onUpdate:modelValue":s[1]||(s[1]=r=>C.value=r),placeholder:"选择刷新间隔",onChange:$},{default:t(()=>[e(h,{label:"5秒",value:5e3}),e(h,{label:"10秒",value:1e4}),e(h,{label:"30秒",value:3e4}),e(h,{label:"1分钟",value:6e4}),e(h,{label:"5分钟",value:3e5})]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1},8,["modelValue"])])}}}),gt=le(dt,[["__scopeId","data-v-6f62cc50"]]);export{gt as default};
