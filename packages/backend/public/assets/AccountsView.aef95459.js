import{d as oe,a as ue,b as le,r as D,c as ne,o as ce,g as n,X as ie,h as m,s as a,i as e,w as t,j as c,U as de,V as re,k as r,Y as _e,C as pe,$ as me,z as g,v as o,x as d,a0 as fe,B as k,A as ve,q as ge,E as he,F as Fe,a1 as M,e as be}from"./index.e61654b0.js";import{a as L,f as $,b as O}from"./format.8ff8c51b.js";import{_ as ye}from"./_plugin-vue_export-helper.cdc0426e.js";const v=y=>(he("data-v-5a86fe94"),y=y(),Fe(),y),Ce={class:"accounts-view"},Ee={class:"accounts-grid"},De={class:"account-header"},ke={class:"account-info"},xe={class:"account-name"},Ae={class:"account-metrics"},we={class:"metric"},Be=v(()=>a("span",{class:"metric-label"},"\u4ECA\u65E5Token:",-1)),Ve={class:"metric-value"},Me={class:"metric"},Te=v(()=>a("span",{class:"metric-label"},"\u4ECA\u65E5\u8D39\u7528:",-1)),Re={class:"metric-value expense"},Se={class:"metric"},Ue=v(()=>a("span",{class:"metric-label"},"\u8FD110\u5206\u949FRPM:",-1)),Ne={class:"metric-value"},Ie={key:0,class:"group-info"},ze={class:"group-details"},Pe={class:"group-name"},Le={class:"group-stats"},$e={class:"group-stat"},Oe={class:"group-stat"},qe={class:"last-used"},Ge={class:"el-text",type:"info",size:"small"},je={class:"card-header"},Qe=v(()=>a("span",null,"\u8D26\u53F7\u8BE6\u7EC6\u7EDF\u8BA1",-1)),Xe={class:"header-actions"},Ye=d(" \u5237\u65B0 "),He={class:"account-name-cell"},Je={class:"el-text",strong:""},Ke={class:"token-usage"},We={class:"expense"},Ze={class:"rpm-cell"},et={class:"rpm-value"},tt={key:1,class:"no-group"},st={key:0},at={key:1},ot={key:0,class:"active-users"},ut={key:1},lt=d(" \u8BE6\u60C5 "),nt={key:0,class:"account-details"},ct={key:1},it={class:"stat-item"},dt=v(()=>a("div",{class:"stat-title"},"\u4ECA\u65E5Token\u4F7F\u7528\u91CF",-1)),rt={class:"stat-value"},_t={class:"stat-item"},pt=v(()=>a("div",{class:"stat-title"},"\u4ECA\u65E5\u8D39\u7528\u6D88\u8017",-1)),mt={class:"stat-value"},ft={class:"stat-item"},vt=v(()=>a("div",{class:"stat-title"},"\u8FD110\u5206\u949F\u5E73\u5747RPM",-1)),gt={class:"stat-value"},ht=v(()=>a("div",{class:"usage-charts",style:{"margin-top":"20px"}},[a("span",{class:"el-text",type:"info"},"\u4F7F\u7528\u8D8B\u52BF\u56FE\u8868\u529F\u80FD\u5F00\u53D1\u4E2D...")],-1)),Ft=oe({setup(y){const F=ue(),q=le(),C=D(""),E=D(""),x=D(!1),l=D(null),G=ne(()=>{let u=F.accounts;if(C.value){const i=C.value.toLowerCase();u=u.filter(_=>_.accountName.toLowerCase().includes(i)||_.accountId.toLowerCase().includes(i))}return E.value&&(u=u.filter(i=>i.platform===E.value)),u}),T=async()=>{await F.fetchAccounts()},A=u=>{l.value=u,x.value=!0,q.subscribeToAccount(u.accountId)},j=u=>{switch(u){case"claude-console":case"claude":return M;case"gemini":return M;case"openai":return be;default:return M}},R=u=>({"claude-console":"Claude Console",claude:"Claude",gemini:"Gemini",openai:"OpenAI",bedrock:"Bedrock","azure-openai":"Azure OpenAI"})[u]||u,S=u=>({"claude-console":"primary",claude:"success",gemini:"warning",openai:"info"})[u]||"info",w=u=>({active:"\u6D3B\u8DC3",expired:"\u5DF2\u8FC7\u671F",error:"\u9519\u8BEF",created:"\u5DF2\u521B\u5EFA"})[u]||u,B=u=>({active:"success",expired:"warning",error:"danger",created:"info"})[u]||"info",Q=u=>Math.min(u/100*100,100),X=u=>u<20?"#67c23a":u<60?"#e6a23c":"#f56c6c";return ce(()=>{T()}),(u,i)=>{const _=n("el-tag"),U=n("el-icon"),Y=n("el-divider"),N=n("el-card"),h=n("el-col"),V=n("el-row"),H=n("el-input"),b=n("el-option"),J=n("el-select"),I=n("el-button"),p=n("el-table-column"),K=n("el-progress"),W=n("el-tooltip"),Z=n("el-table"),f=n("el-descriptions-item"),z=n("el-descriptions"),P=n("el-tab-pane"),ee=n("el-tabs"),te=n("el-dialog"),se=ie("loading");return c(),m("div",Ce,[a("div",Ee,[e(V,{gutter:16},{default:t(()=>[(c(!0),m(de,null,re(r(F).accounts.slice(0,4),s=>(c(),g(h,{span:6,key:s.accountId},{default:t(()=>[e(N,{class:"account-card",onClick:ae=>A(s)},{default:t(()=>[a("div",De,[a("div",ke,[a("h3",xe,o(s.accountName),1),e(_,{type:B(s.status),size:"small"},{default:t(()=>[d(o(w(s.status)),1)]),_:2},1032,["type"])]),e(U,{class:"account-icon"},{default:t(()=>[(c(),g(ve(j(s.platform))))]),_:2},1024)]),a("div",Ae,[a("div",we,[Be,a("span",Ve,o(r(L)(s.todayTokenUsage)),1)]),a("div",Me,[Te,a("span",Re,o(r($)(s.todayExpense)),1)]),a("div",Se,[Ue,a("span",Ne,o(s.recentAvgRpm),1)])]),s.group?(c(),m("div",Ie,[e(Y),a("div",ze,[a("div",Pe,[e(U,null,{default:t(()=>[e(r(ge))]),_:1}),a("span",null,o(s.group.name),1)]),a("div",Le,[a("span",$e," \u603B\u7528\u6237: "+o(s.group.totalMembers),1),a("span",Oe," \u6D3B\u8DC3: "+o(s.group.activeMembers),1)])])])):k("",!0),a("div",qe,[a("span",Ge," \u6700\u540E\u4F7F\u7528: "+o(r(O)(s.lastUsedAt)),1)])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),e(N,null,{header:t(()=>[a("div",je,[Qe,a("div",Xe,[e(H,{modelValue:C.value,"onUpdate:modelValue":i[0]||(i[0]=s=>C.value=s),placeholder:"\u641C\u7D22\u8D26\u53F7","prefix-icon":r(_e),clearable:"",style:{width:"200px","margin-right":"8px"}},null,8,["modelValue","prefix-icon"]),e(J,{modelValue:E.value,"onUpdate:modelValue":i[1]||(i[1]=s=>E.value=s),placeholder:"\u9009\u62E9\u5E73\u53F0",clearable:"",style:{width:"150px","margin-right":"8px"}},{default:t(()=>[e(b,{label:"\u5168\u90E8\u5E73\u53F0",value:""}),e(b,{label:"Claude Console",value:"claude-console"}),e(b,{label:"Claude",value:"claude"}),e(b,{label:"Gemini",value:"gemini"}),e(b,{label:"OpenAI",value:"openai"})]),_:1},8,["modelValue"]),e(I,{type:"primary",icon:r(pe),loading:r(F).loading,onClick:T},{default:t(()=>[Ye]),_:1},8,["icon","loading"])])])]),default:t(()=>[me((c(),g(Z,{data:r(G),stripe:"",style:{width:"100%"},flexible:!0,onRowClick:A},{default:t(()=>[e(p,{prop:"accountName",label:"\u8D26\u53F7\u540D\u79F0","min-width":"150"},{default:t(({row:s})=>[a("div",He,[a("span",Je,o(s.accountName),1),e(_,{type:S(s.platform),size:"small"},{default:t(()=>[d(o(R(s.platform)),1)]),_:2},1032,["type"])])]),_:1}),e(p,{prop:"todayTokenUsage",label:"\u4ECA\u65E5Token\u4F7F\u7528\u91CF","min-width":"140",sortable:""},{default:t(({row:s})=>[a("span",Ke,o(r(L)(s.todayTokenUsage)),1)]),_:1}),e(p,{prop:"todayExpense",label:"\u4ECA\u65E5\u8D39\u7528\u6D88\u8017","min-width":"130",sortable:""},{default:t(({row:s})=>[a("span",We,o(r($)(s.todayExpense)),1)]),_:1}),e(p,{prop:"recentAvgRpm",label:"\u8FD110\u5206\u949FRPM","min-width":"120",sortable:""},{default:t(({row:s})=>[a("div",Ze,[e(K,{percentage:Q(s.recentAvgRpm),"stroke-width":6,"show-text":!1,color:X(s.recentAvgRpm)},null,8,["percentage","color"]),a("span",et,o(s.recentAvgRpm),1)])]),_:1}),e(p,{prop:"group",label:"\u8D26\u53F7\u6240\u5C5E\u5206\u7EC4","min-width":"130"},{default:t(({row:s})=>[s.group?(c(),g(_,{key:0,type:"primary",size:"small"},{default:t(()=>[d(o(s.group.name),1)]),_:2},1024)):(c(),m("span",tt,"\u65E0\u5206\u7EC4"))]),_:1}),e(p,{prop:"group.totalMembers",label:"\u5206\u7EC4\u7528\u6237\u6570",width:"110"},{default:t(({row:s})=>[s.group?(c(),m("span",st,o(s.group.totalMembers),1)):(c(),m("span",at,"-"))]),_:1}),e(p,{prop:"group.activeMembers",label:"\u5206\u7EC4\u6D3B\u8DC3\u7528\u6237","min-width":"130"},{default:t(({row:s})=>[s.group?(c(),m("span",ot,o(s.group.activeMembers)+"/"+o(s.group.totalMembers),1)):(c(),m("span",ut,"-"))]),_:1}),e(p,{prop:"status",label:"\u72B6\u6001",width:"90",align:"center"},{default:t(({row:s})=>[e(_,{type:B(s.status),size:"small"},{default:t(()=>[d(o(w(s.status)),1)]),_:2},1032,["type"])]),_:1}),e(p,{prop:"lastUsedAt",label:"\u6700\u540E\u4F7F\u7528\u65F6\u95F4","min-width":"150"},{default:t(({row:s})=>[e(W,{content:new Date(s.lastUsedAt).toLocaleString()},{default:t(()=>[a("span",null,o(r(O)(s.lastUsedAt)),1)]),_:2},1032,["content"])]),_:1}),e(p,{label:"\u64CD\u4F5C","min-width":"120",fixed:"right"},{default:t(({row:s})=>[e(I,{size:"small",onClick:fe(ae=>A(s),["stop"])},{default:t(()=>[lt]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[se,r(F).loading]])]),_:1}),e(te,{modelValue:x.value,"onUpdate:modelValue":i[2]||(i[2]=s=>x.value=s),title:`\u8D26\u53F7\u8BE6\u60C5: ${l.value?.accountName}`,width:"1000px"},{default:t(()=>[l.value?(c(),m("div",nt,[e(ee,null,{default:t(()=>[e(P,{label:"\u57FA\u672C\u4FE1\u606F",name:"basic"},{default:t(()=>[e(V,{gutter:16},{default:t(()=>[e(h,{span:12},{default:t(()=>[e(z,{title:"\u8D26\u53F7\u4FE1\u606F",column:1,border:""},{default:t(()=>[e(f,{label:"\u8D26\u53F7\u540D\u79F0"},{default:t(()=>[d(o(l.value.accountName),1)]),_:1}),e(f,{label:"\u5E73\u53F0"},{default:t(()=>[e(_,{type:S(l.value.platform)},{default:t(()=>[d(o(R(l.value.platform)),1)]),_:1},8,["type"])]),_:1}),e(f,{label:"\u72B6\u6001"},{default:t(()=>[e(_,{type:B(l.value.status)},{default:t(()=>[d(o(w(l.value.status)),1)]),_:1},8,["type"])]),_:1}),e(f,{label:"\u662F\u5426\u6D3B\u8DC3"},{default:t(()=>[e(_,{type:l.value.isActive?"success":"danger"},{default:t(()=>[d(o(l.value.isActive?"\u662F":"\u5426"),1)]),_:1},8,["type"])]),_:1}),e(f,{label:"\u6700\u540E\u4F7F\u7528\u65F6\u95F4"},{default:t(()=>[d(o(new Date(l.value.lastUsedAt).toLocaleString()),1)]),_:1})]),_:1})]),_:1}),e(h,{span:12},{default:t(()=>[e(z,{title:"\u5206\u7EC4\u4FE1\u606F",column:1,border:""},{default:t(()=>[e(f,{label:"\u6240\u5C5E\u5206\u7EC4"},{default:t(()=>[l.value.group?(c(),g(_,{key:0,type:"primary"},{default:t(()=>[d(o(l.value.group.name),1)]),_:1})):(c(),m("span",ct,"\u65E0\u5206\u7EC4"))]),_:1}),l.value.group?(c(),g(f,{key:0,label:"\u5206\u7EC4\u603B\u7528\u6237\u6570"},{default:t(()=>[d(o(l.value.group.totalMembers),1)]),_:1})):k("",!0),l.value.group?(c(),g(f,{key:1,label:"\u5206\u7EC4\u6D3B\u8DC3\u7528\u6237\u6570"},{default:t(()=>[d(o(l.value.group.activeMembers),1)]),_:1})):k("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e(P,{label:"\u4F7F\u7528\u7EDF\u8BA1",name:"usage"},{default:t(()=>[e(V,{gutter:16},{default:t(()=>[e(h,{span:8},{default:t(()=>[a("div",it,[dt,a("div",rt,o(l.value.todayTokenUsage||0),1)])]),_:1}),e(h,{span:8},{default:t(()=>[a("div",_t,[pt,a("div",mt,"$"+o((l.value.todayExpense||0).toFixed(2)),1)])]),_:1}),e(h,{span:8},{default:t(()=>[a("div",ft,[vt,a("div",gt,o(l.value.recentAvgRpm||0),1)])]),_:1})]),_:1}),ht]),_:1})]),_:1})])):k("",!0)]),_:1},8,["modelValue","title"])])}}});const Et=ye(Ft,[["__scopeId","data-v-5a86fe94"]]);export{Et as default};
