import{_ as H}from"./_plugin-vue_export-helper-BJA4NJ9J.js";/* empty css                    *//* empty css               */import{f as k,a as v}from"./format-B4y3xwuR.js";/* empty css                */import{u as X,i as Y,a as K,b as L,c as W,d as Z,e as J,f as Q,g as tt,H as y}from"./echarts-DOdqDixu.js";import{ai as st,aj as et,ak as at,W as ot,Y as nt,a1 as d,al as w,am as lt,an as it,ao as rt,Z as dt,ap as ut,aq as ct,ar as _t,as as mt}from"./element-plus-A89xnwnm.js";import{u as pt}from"./index-BnHm-nza.js";import{l as ft,r as vt,c as f,e as yt,m as _,q as m,t,H as e,B as a,u as o,F as g,D as h,G as D,Y as B}from"./vue-vendor-C0qDyb5Q.js";import"./utils-AU2jKXl8.js";const gt={class:"overview-view"},ht={class:"stats-overview"},xt={class:"stat-content"},bt={class:"stat-icon"},kt={class:"stat-info"},wt={class:"stat-number"},Tt={class:"stat-trend"},Mt={class:"stat-content"},qt={class:"stat-icon expense"},Ct={class:"stat-info"},At={class:"stat-number"},St={class:"stat-trend"},Ot={class:"stat-content"},Et={class:"stat-icon requests"},$t={class:"stat-info"},Vt={class:"stat-number"},Dt={class:"stat-trend"},Bt={class:"stat-content"},It={class:"stat-icon accounts"},Pt={class:"stat-info"},Rt={class:"stat-number"},Ut={class:"stat-trend"},Nt={class:"chart-header"},zt={class:"chart-container"},Gt={class:"chart-container"},jt={class:"chart-container"},Ft={class:"chart-container"},Ht={class:"chart-header"},Xt={class:"system-metrics"},Yt={key:0,class:"metric-item"},Kt={class:"metric-value"},Lt={key:1,class:"metric-item"},Wt={class:"metric-value"},Zt={key:2,class:"metric-item"},Jt={class:"metric-value"},Qt={key:3,class:"metric-item"},ts={class:"metric-value"},ss={class:"top-list"},es={class:"rank"},as={class:"item-info"},os={class:"item-name"},ns={class:"item-detail"},ls={class:"item-progress"},is={class:"top-list"},rs={class:"rank"},ds={class:"item-info"},us={class:"item-name"},cs={class:"item-detail"},_s={class:"item-progress"},ms=ft({__name:"OverviewView",setup(ps){X([Y,K,L,W,Z,J,Q,tt]);const i=pt(),T=vt("24h"),M=f(()=>i.apiKeys.sort((u,s)=>{var l,n,r,p;return(((n=(l=s.usage)==null?void 0:l.today)==null?void 0:n.requests)||0)-(((p=(r=u.usage)==null?void 0:r.today)==null?void 0:p.requests)||0)}).slice(0,5)),q=f(()=>{if(!i.systemMetrics)return"info";const u=i.systemMetrics.requests;return u>100?"danger":u>50?"warning":"success"}),I=f(()=>({success:"正常",warning:"繁忙",danger:"高负载",info:"无数据"})[q.value]||"无数据"),P=f(()=>{const u=Array.from({length:24},(l,n)=>`${n.toString().padStart(2,"0")}:00`),s=Array.from({length:24},()=>Math.floor(Math.random()*100)+50);return{tooltip:{trigger:"axis",formatter:"{a}: {c} 请求"},xAxis:{type:"category",data:u,boundaryGap:!1},yAxis:{type:"value",name:"请求数"},series:[{name:"请求数",type:"line",data:s,smooth:!0,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(59, 130, 246, 0.5)"},{offset:1,color:"rgba(59, 130, 246, 0.1)"}]}},lineStyle:{color:"#3b82f6"}}]}}),R=f(()=>({tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c}% ({d}%)"},series:[{name:"Token分布",type:"pie",radius:["40%","70%"],data:[{name:"Input Tokens",value:45},{name:"Output Tokens",value:30},{name:"Cache Create",value:15},{name:"Cache Read",value:10}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})),U=f(()=>({tooltip:{trigger:"axis",formatter:"{a}: ${c}"},xAxis:{type:"category",data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value",name:"费用 ($)"},series:[{name:"费用",type:"bar",data:[120,132,101,134,90,230,210],itemStyle:{color:"#10b981"}}]})),N=f(()=>{const u=i.accounts.reduce((l,n)=>(l[n.platform]=(l[n.platform]||0)+1,l),{}),s=Object.entries(u).map(([l,n])=>({name:l,value:n}));return{tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},series:[{name:"平台分布",type:"pie",radius:"60%",data:s,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}),z=u=>{const s=Math.max(...M.value.map(l=>{var n,r;return((r=(n=l.usage)==null?void 0:n.today)==null?void 0:r.requests)||0}));return s>0?u/s*100:0},G=u=>{const s=Math.max(...i.topUsageAccounts.map(l=>l.todayTokenUsage));return s>0?u/s*100:0};return yt(()=>{i.initializeData()}),(u,s)=>{const l=ot,n=at,r=et,p=st,x=ct,j=ut,F=_t,C=mt;return m(),_("div",gt,[t("div",ht,[e(p,{gutter:16},{default:a(()=>[e(r,{span:6},{default:a(()=>[e(n,{class:"stat-card"},{default:a(()=>[t("div",xt,[t("div",bt,[e(l,null,{default:a(()=>[e(o(nt))]),_:1})]),t("div",kt,[t("div",wt,d(o(i).activeApiKeys.length),1),s[2]||(s[2]=t("div",{class:"stat-title"},"活跃API Keys",-1)),t("div",Tt,[e(l,{class:"trend-icon up"},{default:a(()=>[e(o(w))]),_:1}),s[1]||(s[1]=t("span",{class:"trend-text"},"+5.2%",-1))])])])]),_:1})]),_:1}),e(r,{span:6},{default:a(()=>[e(n,{class:"stat-card"},{default:a(()=>[t("div",Mt,[t("div",qt,[e(l,null,{default:a(()=>[e(o(lt))]),_:1})]),t("div",Ct,[t("div",At,d(o(k)(o(i).totalDailyCost)),1),s[4]||(s[4]=t("div",{class:"stat-title"},"今日总消费",-1)),t("div",St,[e(l,{class:"trend-icon down"},{default:a(()=>[e(o(it))]),_:1}),s[3]||(s[3]=t("span",{class:"trend-text"},"-2.1%",-1))])])])]),_:1})]),_:1}),e(r,{span:6},{default:a(()=>[e(n,{class:"stat-card"},{default:a(()=>[t("div",Ot,[t("div",Et,[e(l,null,{default:a(()=>[e(o(rt))]),_:1})]),t("div",$t,[t("div",Vt,d(o(v)(o(i).totalTodayRequests)),1),s[6]||(s[6]=t("div",{class:"stat-title"},"今日总请求",-1)),t("div",Dt,[e(l,{class:"trend-icon up"},{default:a(()=>[e(o(w))]),_:1}),s[5]||(s[5]=t("span",{class:"trend-text"},"+8.7%",-1))])])])]),_:1})]),_:1}),e(r,{span:6},{default:a(()=>[e(n,{class:"stat-card"},{default:a(()=>[t("div",Bt,[t("div",It,[e(l,null,{default:a(()=>[e(o(dt))]),_:1})]),t("div",Pt,[t("div",Rt,d(o(i).activeAccountsCount),1),s[8]||(s[8]=t("div",{class:"stat-title"},"活跃账号",-1)),t("div",Ut,[e(l,{class:"trend-icon up"},{default:a(()=>[e(o(w))]),_:1}),s[7]||(s[7]=t("span",{class:"trend-text"},"+1.3%",-1))])])])]),_:1})]),_:1})]),_:1})]),e(p,{gutter:16},{default:a(()=>[e(r,{span:12},{default:a(()=>[e(n,null,{header:a(()=>[t("div",Nt,[s[12]||(s[12]=t("span",null,"今日请求趋势",-1)),e(j,{modelValue:T.value,"onUpdate:modelValue":s[0]||(s[0]=c=>T.value=c),size:"small"},{default:a(()=>[e(x,{label:"24h"},{default:a(()=>[...s[9]||(s[9]=[g("24小时",-1)])]),_:1}),e(x,{label:"12h"},{default:a(()=>[...s[10]||(s[10]=[g("12小时",-1)])]),_:1}),e(x,{label:"6h"},{default:a(()=>[...s[11]||(s[11]=[g("6小时",-1)])]),_:1})]),_:1},8,["modelValue"])])]),default:a(()=>[t("div",zt,[e(o(y),{option:P.value,style:{height:"300px"}},null,8,["option"])])]),_:1})]),_:1}),e(r,{span:12},{default:a(()=>[e(n,null,{header:a(()=>[...s[13]||(s[13]=[t("span",null,"Token使用分布",-1)])]),default:a(()=>[t("div",Gt,[e(o(y),{option:R.value,style:{height:"300px"}},null,8,["option"])])]),_:1})]),_:1})]),_:1}),e(p,{gutter:16,style:{"margin-top":"16px"}},{default:a(()=>[e(r,{span:8},{default:a(()=>[e(n,null,{header:a(()=>[...s[14]||(s[14]=[t("span",null,"费用趋势",-1)])]),default:a(()=>[t("div",jt,[e(o(y),{option:U.value,style:{height:"250px"}},null,8,["option"])])]),_:1})]),_:1}),e(r,{span:8},{default:a(()=>[e(n,null,{header:a(()=>[...s[15]||(s[15]=[t("span",null,"平台分布",-1)])]),default:a(()=>[t("div",Ft,[e(o(y),{option:N.value,style:{height:"250px"}},null,8,["option"])])]),_:1})]),_:1}),e(r,{span:8},{default:a(()=>[e(n,null,{header:a(()=>[t("div",Ht,[s[16]||(s[16]=t("span",null,"实时系统指标",-1)),e(F,{type:q.value,size:"small"},{default:a(()=>[g(d(I.value),1)]),_:1},8,["type"])])]),default:a(()=>[t("div",Xt,[o(i).systemMetrics?(m(),_("div",Yt,[s[17]||(s[17]=t("div",{class:"metric-label"},"每分钟请求",-1)),t("div",Kt,d(o(i).systemMetrics.requests),1)])):h("",!0),o(i).systemMetrics?(m(),_("div",Lt,[s[18]||(s[18]=t("div",{class:"metric-label"},"总Token",-1)),t("div",Wt,d(o(v)(o(i).systemMetrics.totalTokens)),1)])):h("",!0),o(i).systemMetrics?(m(),_("div",Zt,[s[19]||(s[19]=t("div",{class:"metric-label"},"输入Token",-1)),t("div",Jt,d(o(v)(o(i).systemMetrics.inputTokens)),1)])):h("",!0),o(i).systemMetrics?(m(),_("div",Qt,[s[20]||(s[20]=t("div",{class:"metric-label"},"输出Token",-1)),t("div",ts,d(o(v)(o(i).systemMetrics.outputTokens)),1)])):h("",!0)])]),_:1})]),_:1})]),_:1}),e(p,{gutter:16,style:{"margin-top":"16px"}},{default:a(()=>[e(r,{span:12},{default:a(()=>[e(n,null,{header:a(()=>[...s[21]||(s[21]=[t("span",null,"使用量TOP API Keys",-1)])]),default:a(()=>[t("div",ss,[(m(!0),_(D,null,B(M.value,(c,b)=>{var A,S,O,E,$,V;return m(),_("div",{key:c.keyId,class:"top-item"},[t("div",es,d(b+1),1),t("div",as,[t("div",os,d(c.name),1),t("div",ns,d(o(v)(((S=(A=c.usage)==null?void 0:A.today)==null?void 0:S.requests)||0))+" 请求 • "+d(o(k)(((E=(O=c.usage)==null?void 0:O.today)==null?void 0:E.cost)||0)),1)]),t("div",ls,[e(C,{percentage:z(((V=($=c.usage)==null?void 0:$.today)==null?void 0:V.requests)||0),"stroke-width":6,"show-text":!1},null,8,["percentage"])])])}),128))])]),_:1})]),_:1}),e(r,{span:12},{default:a(()=>[e(n,null,{header:a(()=>[...s[22]||(s[22]=[t("span",null,"使用量TOP 账号",-1)])]),default:a(()=>[t("div",is,[(m(!0),_(D,null,B(o(i).topUsageAccounts,(c,b)=>(m(),_("div",{key:c.accountId,class:"top-item"},[t("div",rs,d(b+1),1),t("div",ds,[t("div",us,d(c.accountName),1),t("div",cs,d(o(v)(c.todayTokenUsage))+" Tokens • "+d(o(k)(c.todayExpense)),1)]),t("div",_s,[e(C,{percentage:G(c.todayTokenUsage),"stroke-width":6,"show-text":!1},null,8,["percentage"])])]))),128))])]),_:1})]),_:1})]),_:1})])}}}),Ms=H(ms,[["__scopeId","data-v-7f31f0be"]]);export{Ms as default};
