import{_ as J}from"./_plugin-vue_export-helper-vHbaxTkL.js";/* empty css                    *//* empty css               */import{f as T,a as v}from"./format-BAX8h6T0.js";/* empty css                *//* empty css                */import{u as K,i as L,a as Q,b as W,c as Y,d as Z,e as tt,f as st,g as et,H as g}from"./echarts-FiRSt-Lb.js";import{_ as at,az as ot,aA as nt,aB as it,aa as lt,u as a,ac as ct,ah as d,aC as M,aD as dt,aE as rt,aF as _t,ad as ut,aG as pt,aH as mt,aI as ht,aJ as ft}from"./element-plus-BlTo_VXI.js";import{u as vt}from"./index-CL1UbGLD.js";import{q as yt,c as f,o as gt,b as p,d as t,D as s,v as e,f as m,B as x,z as b,F as B,P,a5 as bt,a6 as xt}from"./vue-vendor-BkJYhFEr.js";import"./utils-2ne8F3OK.js";const l=y=>(bt("data-v-7f31f0be"),y=y(),xt(),y),kt={class:"overview-view"},wt={class:"stats-overview"},Tt={class:"stat-content"},Mt={class:"stat-icon"},St={class:"stat-info"},Ct={class:"stat-number"},qt=l(()=>t("div",{class:"stat-title"},"活跃API Keys",-1)),At={class:"stat-trend"},Ot=l(()=>t("span",{class:"trend-text"},"+5.2%",-1)),Et={class:"stat-content"},It={class:"stat-icon expense"},$t={class:"stat-info"},Dt={class:"stat-number"},Vt=l(()=>t("div",{class:"stat-title"},"今日总消费",-1)),Bt={class:"stat-trend"},Pt=l(()=>t("span",{class:"trend-text"},"-2.1%",-1)),Rt={class:"stat-content"},Ut={class:"stat-icon requests"},Nt={class:"stat-info"},zt={class:"stat-number"},Ft=l(()=>t("div",{class:"stat-title"},"今日总请求",-1)),Gt={class:"stat-trend"},Ht=l(()=>t("span",{class:"trend-text"},"+8.7%",-1)),Xt={class:"stat-content"},jt={class:"stat-icon accounts"},Jt={class:"stat-info"},Kt={class:"stat-number"},Lt=l(()=>t("div",{class:"stat-title"},"活跃账号",-1)),Qt={class:"stat-trend"},Wt=l(()=>t("span",{class:"trend-text"},"+1.3%",-1)),Yt={class:"chart-header"},Zt=l(()=>t("span",null,"今日请求趋势",-1)),ts=x("24小时"),ss=x("12小时"),es=x("6小时"),as={class:"chart-container"},os=l(()=>t("span",null,"Token使用分布",-1)),ns={class:"chart-container"},is=l(()=>t("span",null,"费用趋势",-1)),ls={class:"chart-container"},cs=l(()=>t("span",null,"平台分布",-1)),ds={class:"chart-container"},rs={class:"chart-header"},_s=l(()=>t("span",null,"实时系统指标",-1)),us={class:"system-metrics"},ps={key:0,class:"metric-item"},ms=l(()=>t("div",{class:"metric-label"},"每分钟请求",-1)),hs={class:"metric-value"},fs={key:1,class:"metric-item"},vs=l(()=>t("div",{class:"metric-label"},"总Token",-1)),ys={class:"metric-value"},gs={key:2,class:"metric-item"},bs=l(()=>t("div",{class:"metric-label"},"输入Token",-1)),xs={class:"metric-value"},ks={key:3,class:"metric-item"},ws=l(()=>t("div",{class:"metric-label"},"输出Token",-1)),Ts={class:"metric-value"},Ms=l(()=>t("span",null,"使用量TOP API Keys",-1)),Ss={class:"top-list"},Cs={class:"rank"},qs={class:"item-info"},As={class:"item-name"},Os={class:"item-detail"},Es={class:"item-progress"},Is=l(()=>t("span",null,"使用量TOP 账号",-1)),$s={class:"top-list"},Ds={class:"rank"},Vs={class:"item-info"},Bs={class:"item-name"},Ps={class:"item-detail"},Rs={class:"item-progress"},Us=yt({__name:"OverviewView",setup(y){K([L,Q,W,Y,Z,tt,st,et]);const i=vt(),S=at("24h"),C=f(()=>i.apiKeys.sort((r,_)=>{var n,o,c,h;return(((o=(n=_.usage)==null?void 0:n.today)==null?void 0:o.requests)||0)-(((h=(c=r.usage)==null?void 0:c.today)==null?void 0:h.requests)||0)}).slice(0,5)),q=f(()=>{if(!i.systemMetrics)return"info";const r=i.systemMetrics.requests;return r>100?"danger":r>50?"warning":"success"}),R=f(()=>({success:"正常",warning:"繁忙",danger:"高负载",info:"无数据"})[q.value]||"无数据"),U=f(()=>{const r=Array.from({length:24},(n,o)=>`${o.toString().padStart(2,"0")}:00`),_=Array.from({length:24},()=>Math.floor(Math.random()*100)+50);return{tooltip:{trigger:"axis",formatter:"{a}: {c} 请求"},xAxis:{type:"category",data:r,boundaryGap:!1},yAxis:{type:"value",name:"请求数"},series:[{name:"请求数",type:"line",data:_,smooth:!0,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(59, 130, 246, 0.5)"},{offset:1,color:"rgba(59, 130, 246, 0.1)"}]}},lineStyle:{color:"#3b82f6"}}]}}),N=f(()=>({tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c}% ({d}%)"},series:[{name:"Token分布",type:"pie",radius:["40%","70%"],data:[{name:"Input Tokens",value:45},{name:"Output Tokens",value:30},{name:"Cache Create",value:15},{name:"Cache Read",value:10}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})),z=f(()=>({tooltip:{trigger:"axis",formatter:"{a}: ${c}"},xAxis:{type:"category",data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value",name:"费用 ($)"},series:[{name:"费用",type:"bar",data:[120,132,101,134,90,230,210],itemStyle:{color:"#10b981"}}]})),F=f(()=>{const r=i.accounts.reduce((n,o)=>(n[o.platform]=(n[o.platform]||0)+1,n),{}),_=Object.entries(r).map(([n,o])=>({name:n,value:o}));return{tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},series:[{name:"平台分布",type:"pie",radius:"60%",data:_,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}),G=r=>{const _=Math.max(...C.value.map(n=>{var o,c;return((c=(o=n.usage)==null?void 0:o.today)==null?void 0:c.requests)||0}));return _>0?r/_*100:0},H=r=>{const _=Math.max(...i.topUsageAccounts.map(n=>n.todayTokenUsage));return _>0?r/_*100:0};return gt(()=>{i.initializeData()}),(r,_)=>{const n=lt,o=it,c=nt,h=ot,k=mt,X=pt,j=ht,A=ft;return m(),p("div",kt,[t("div",wt,[s(h,{gutter:16},{default:e(()=>[s(c,{span:6},{default:e(()=>[s(o,{class:"stat-card"},{default:e(()=>[t("div",Tt,[t("div",Mt,[s(n,null,{default:e(()=>[s(a(ct))]),_:1})]),t("div",St,[t("div",Ct,d(a(i).activeApiKeys.length),1),qt,t("div",At,[s(n,{class:"trend-icon up"},{default:e(()=>[s(a(M))]),_:1}),Ot])])])]),_:1})]),_:1}),s(c,{span:6},{default:e(()=>[s(o,{class:"stat-card"},{default:e(()=>[t("div",Et,[t("div",It,[s(n,null,{default:e(()=>[s(a(dt))]),_:1})]),t("div",$t,[t("div",Dt,d(a(T)(a(i).totalDailyCost)),1),Vt,t("div",Bt,[s(n,{class:"trend-icon down"},{default:e(()=>[s(a(rt))]),_:1}),Pt])])])]),_:1})]),_:1}),s(c,{span:6},{default:e(()=>[s(o,{class:"stat-card"},{default:e(()=>[t("div",Rt,[t("div",Ut,[s(n,null,{default:e(()=>[s(a(_t))]),_:1})]),t("div",Nt,[t("div",zt,d(a(v)(a(i).totalTodayRequests)),1),Ft,t("div",Gt,[s(n,{class:"trend-icon up"},{default:e(()=>[s(a(M))]),_:1}),Ht])])])]),_:1})]),_:1}),s(c,{span:6},{default:e(()=>[s(o,{class:"stat-card"},{default:e(()=>[t("div",Xt,[t("div",jt,[s(n,null,{default:e(()=>[s(a(ut))]),_:1})]),t("div",Jt,[t("div",Kt,d(a(i).activeAccountsCount),1),Lt,t("div",Qt,[s(n,{class:"trend-icon up"},{default:e(()=>[s(a(M))]),_:1}),Wt])])])]),_:1})]),_:1})]),_:1})]),s(h,{gutter:16},{default:e(()=>[s(c,{span:12},{default:e(()=>[s(o,null,{header:e(()=>[t("div",Yt,[Zt,s(X,{modelValue:S.value,"onUpdate:modelValue":_[0]||(_[0]=u=>S.value=u),size:"small"},{default:e(()=>[s(k,{label:"24h"},{default:e(()=>[ts]),_:1}),s(k,{label:"12h"},{default:e(()=>[ss]),_:1}),s(k,{label:"6h"},{default:e(()=>[es]),_:1})]),_:1},8,["modelValue"])])]),default:e(()=>[t("div",as,[s(a(g),{option:a(U),style:{height:"300px"}},null,8,["option"])])]),_:1})]),_:1}),s(c,{span:12},{default:e(()=>[s(o,null,{header:e(()=>[os]),default:e(()=>[t("div",ns,[s(a(g),{option:a(N),style:{height:"300px"}},null,8,["option"])])]),_:1})]),_:1})]),_:1}),s(h,{gutter:16,style:{"margin-top":"16px"}},{default:e(()=>[s(c,{span:8},{default:e(()=>[s(o,null,{header:e(()=>[is]),default:e(()=>[t("div",ls,[s(a(g),{option:a(z),style:{height:"250px"}},null,8,["option"])])]),_:1})]),_:1}),s(c,{span:8},{default:e(()=>[s(o,null,{header:e(()=>[cs]),default:e(()=>[t("div",ds,[s(a(g),{option:a(F),style:{height:"250px"}},null,8,["option"])])]),_:1})]),_:1}),s(c,{span:8},{default:e(()=>[s(o,null,{header:e(()=>[t("div",rs,[_s,s(j,{type:a(q),size:"small"},{default:e(()=>[x(d(a(R)),1)]),_:1},8,["type"])])]),default:e(()=>[t("div",us,[a(i).systemMetrics?(m(),p("div",ps,[ms,t("div",hs,d(a(i).systemMetrics.requests),1)])):b("",!0),a(i).systemMetrics?(m(),p("div",fs,[vs,t("div",ys,d(a(v)(a(i).systemMetrics.totalTokens)),1)])):b("",!0),a(i).systemMetrics?(m(),p("div",gs,[bs,t("div",xs,d(a(v)(a(i).systemMetrics.inputTokens)),1)])):b("",!0),a(i).systemMetrics?(m(),p("div",ks,[ws,t("div",Ts,d(a(v)(a(i).systemMetrics.outputTokens)),1)])):b("",!0)])]),_:1})]),_:1})]),_:1}),s(h,{gutter:16,style:{"margin-top":"16px"}},{default:e(()=>[s(c,{span:12},{default:e(()=>[s(o,null,{header:e(()=>[Ms]),default:e(()=>[t("div",Ss,[(m(!0),p(B,null,P(a(C),(u,w)=>{var O,E,I,$,D,V;return m(),p("div",{key:u.keyId,class:"top-item"},[t("div",Cs,d(w+1),1),t("div",qs,[t("div",As,d(u.name),1),t("div",Os,d(a(v)(((E=(O=u.usage)==null?void 0:O.today)==null?void 0:E.requests)||0))+" 请求 • "+d(a(T)((($=(I=u.usage)==null?void 0:I.today)==null?void 0:$.cost)||0)),1)]),t("div",Es,[s(A,{percentage:G(((V=(D=u.usage)==null?void 0:D.today)==null?void 0:V.requests)||0),"stroke-width":6,"show-text":!1},null,8,["percentage"])])])}),128))])]),_:1})]),_:1}),s(c,{span:12},{default:e(()=>[s(o,null,{header:e(()=>[Is]),default:e(()=>[t("div",$s,[(m(!0),p(B,null,P(a(i).topUsageAccounts,(u,w)=>(m(),p("div",{key:u.accountId,class:"top-item"},[t("div",Ds,d(w+1),1),t("div",Vs,[t("div",Bs,d(u.accountName),1),t("div",Ps,d(a(v)(u.todayTokenUsage))+" Tokens • "+d(a(T)(u.todayExpense)),1)]),t("div",Rs,[s(A,{percentage:H(u.todayTokenUsage),"stroke-width":6,"show-text":!1},null,8,["percentage"])])]))),128))])]),_:1})]),_:1})]),_:1})])}}}),Ws=J(Us,[["__scopeId","data-v-7f31f0be"]]);export{Ws as default};
